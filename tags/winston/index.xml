<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Winston on</title><link>https://minuk.dev/tags/winston/</link><description>Recent content in Winston on</description><generator>Hugo</generator><language>ko-kr</language><lastBuildDate>Tue, 15 Mar 2022 02:34:17 +0900</lastBuildDate><atom:link href="https://minuk.dev/tags/winston/index.xml" rel="self" type="application/rss+xml"/><item><title>winston</title><link>https://minuk.dev/wiki/winston/</link><pubDate>Tue, 07 Apr 2020 20:32:24 +0900</pubDate><guid>https://minuk.dev/wiki/winston/</guid><description>&lt;div class="codeblock">
 
 &lt;div class="copy-button-box">
 &lt;button class="copy-button" state="copy" data="import%20*%20as%20config%20from%20%22config%22;%0a%20%20%20%20import%20%7b%20Logger,%20LoggerInstance,%20LoggerOptions,%20transports%20%7d%20from%20%22winston%22;%0a%20%20%20%20require%28%22winston-daily-rotate-file%22%29;%0a%0a%20%20%20%20const%20defaultLevel%20=%20process.env.LOG_LEVEL;%0a%0a%20%20%20%20//%20We%20might%20want%20to%20do%20something%20on%20rotation?%0a%20%20%20%20//%20rotateTransport.on%28%22rotate%22,%20%28oldFailename,%20newFilename%29%20=%3e%20%7b%0a%20%20%20%20//%20%20%20%20%20//%20do%20something%20fun%0a%20%20%20%20//%20%7d%29;%0a%0a%20%20%20%20const%20options:%20LoggerOptions%20=%20%7b%0a%20%20%20%20%20%20%20%20exitOnError:%20false,%0a%20%20%20%20%20%20%20%20level:%20defaultLevel,%0a%20%20%20%20%20%20%20%20transports:%20[%0a%20%20%20%20%20%20%20%20%20%20%20%20new%20transports.DailyRotateFile%28%7b%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name:%20%22info%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filename:%20config.logging.default,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20datePattern:%20%22YYYY-MM-DD-HH%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zippedArchive:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxSize:%20%2220m%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxFiles:%20%2214d%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20showLevel:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20level:%20%22info%22,%20//%20info%20and%20below%20to%20rotate%0a%20%20%20%20%20%20%20%20%20%20%20%20%7d%29,%0a%20%20%20%20%20%20%20%20%20%20%20%20new%20transports.DailyRotateFile%28%7b%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name:%20%22error%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filename:%20config.logging.error,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20datePattern:%20%22YYYY-MM-DD-HH%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zippedArchive:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxSize:%20%2220m%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxFiles:%20%2214d%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20showLevel:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20level:%20%22error%22,%20//%20error%20and%20below%20to%20rotate%0a%20%20%20%20%20%20%20%20%20%20%20%20%7d%29,%0a%20%20%20%20%20%20%20%20%20%20%20%20new%20transports.DailyRotateFile%28%7b%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name:%20%22silly%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filename:%20config.logging.silly,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20datePattern:%20%22YYYY-MM-DD-HH%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zippedArchive:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxSize:%20%2220m%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20maxFiles:%20%221d%22,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20showLevel:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20level:%20%22silly%22,%20//%20error%20and%20below%20to%20rotate%0a%20%20%20%20%20%20%20%20%20%20%20%20%7d%29,%0a%20%20%20%20%20%20%20%20],%0a%20%20%20%20%7d;%0a%0a%20%20%20%20const%20logger:%20LoggerInstance%20=%20new%20Logger%28options%29;%0a%0a%20%20%20%20if%20%28process.env.NODE_ENV%20===%20%22develop%22%29%20%7b%0a%20%20%20%20%20%20%20%20logger.add%28transports.Console,%20%7b%0a%20%20%20%20%20%20%20%20%20%20%20%20colorize:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20showLevel:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20timestamp:%20true,%0a%20%20%20%20%20%20%20%20%20%20%20%20level:%20%22debug%22,%20//%20debug%20and%20below%20to%20console%0a%20%20%20%20%20%20%20%20%7d%29;%0a%20%20%20%20%7d%0a%0a%20%20%20%20export%20%7b%20logger%20%7d;">
 &lt;i class="bi bi-copy">&lt;/i>
 &lt;/button>
 &lt;/div>
 

 
 &lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">import&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#a6e22e">as&lt;/span> &lt;span style="color:#a6e22e">config&lt;/span> &lt;span style="color:#a6e22e">from&lt;/span> &lt;span style="color:#e6db74">&amp;#34;config&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">import&lt;/span> { &lt;span style="color:#a6e22e">Logger&lt;/span>, &lt;span style="color:#a6e22e">LoggerInstance&lt;/span>, &lt;span style="color:#a6e22e">LoggerOptions&lt;/span>, &lt;span style="color:#a6e22e">transports&lt;/span> } &lt;span style="color:#a6e22e">from&lt;/span> &lt;span style="color:#e6db74">&amp;#34;winston&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">require&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;winston-daily-rotate-file&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">defaultLevel&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#a6e22e">process&lt;/span>.&lt;span style="color:#a6e22e">env&lt;/span>.&lt;span style="color:#a6e22e">LOG_LEVEL&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// We might want to do something on rotation?
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// rotateTransport.on(&amp;#34;rotate&amp;#34;, (oldFailename, newFilename) =&amp;gt; {
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// // do something fun
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">// });
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">options&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">LoggerOptions&lt;/span> &lt;span style="color:#f92672">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">exitOnError&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">level&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">defaultLevel&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">transports&lt;/span>&lt;span style="color:#f92672">:&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">transports&lt;/span>.&lt;span style="color:#a6e22e">DailyRotateFile&lt;/span>({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;info&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">filename&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">logging&lt;/span>.&lt;span style="color:#66d9ef">default&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">datePattern&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;YYYY-MM-DD-HH&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">zippedArchive&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">maxSize&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;20m&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">maxFiles&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;14d&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">showLevel&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timestamp&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">level&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;info&amp;#34;&lt;/span>, &lt;span style="color:#75715e">// info and below to rotate
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> }),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">transports&lt;/span>.&lt;span style="color:#a6e22e">DailyRotateFile&lt;/span>({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;error&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">filename&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">logging&lt;/span>.&lt;span style="color:#a6e22e">error&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">datePattern&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;YYYY-MM-DD-HH&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">zippedArchive&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">maxSize&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;20m&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">maxFiles&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;14d&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">showLevel&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timestamp&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">level&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;error&amp;#34;&lt;/span>, &lt;span style="color:#75715e">// error and below to rotate
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> }),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">transports&lt;/span>.&lt;span style="color:#a6e22e">DailyRotateFile&lt;/span>({
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">name&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;silly&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">filename&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">config&lt;/span>.&lt;span style="color:#a6e22e">logging&lt;/span>.&lt;span style="color:#a6e22e">silly&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">datePattern&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;YYYY-MM-DD-HH&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">zippedArchive&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">maxSize&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;20m&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">maxFiles&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;1d&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">showLevel&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timestamp&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">level&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;silly&amp;#34;&lt;/span>, &lt;span style="color:#75715e">// error and below to rotate
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> }),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">logger&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#a6e22e">LoggerInstance&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> &lt;span style="color:#a6e22e">Logger&lt;/span>(&lt;span style="color:#a6e22e">options&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#a6e22e">process&lt;/span>.&lt;span style="color:#a6e22e">env&lt;/span>.&lt;span style="color:#a6e22e">NODE_ENV&lt;/span> &lt;span style="color:#f92672">===&lt;/span> &lt;span style="color:#e6db74">&amp;#34;develop&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">logger&lt;/span>.&lt;span style="color:#a6e22e">add&lt;/span>(&lt;span style="color:#a6e22e">transports&lt;/span>.&lt;span style="color:#a6e22e">Console&lt;/span>, {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">colorize&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">showLevel&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">timestamp&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#66d9ef">true&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">level&lt;/span>&lt;span style="color:#f92672">:&lt;/span> &lt;span style="color:#e6db74">&amp;#34;debug&amp;#34;&lt;/span>, &lt;span style="color:#75715e">// debug and below to console
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> });
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">export&lt;/span> { &lt;span style="color:#a6e22e">logger&lt;/span> };&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 
&lt;/div></description></item></channel></rss>
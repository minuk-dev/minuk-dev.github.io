<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Mmap on</title><link>https://minuk.dev/tags/mmap/</link><description>Recent content in Mmap on</description><generator>Hugo</generator><language>ko-kr</language><lastBuildDate>Fri, 05 Jun 2020 19:59:59 +0900</lastBuildDate><atom:link href="https://minuk.dev/tags/mmap/index.xml" rel="self" type="application/rss+xml"/><item><title>mmap</title><link>https://minuk.dev/wiki/mmap/</link><pubDate>Fri, 05 Jun 2020 19:52:18 +0900</pubDate><guid>https://minuk.dev/wiki/mmap/</guid><description>&lt;h2 id="map_shared-vs-map_private">&lt;code>MAP_SHARED&lt;/code> vs &lt;code>MAP_PRIVATE&lt;/code>&lt;/h2>
&lt;ul>
&lt;li>이에 관한 내용을 검색해보니 많은 내용들이 나온다.&lt;/li>
&lt;li>그런데 대부분 공유하는 내용이랑 메뉴얼을 참조하라고만 하지 직접적 성능비교는 못찾았다.&lt;/li>
&lt;li>그래서 결국 생각이 미친게 innodb는 빠른 방법 혹은 느리더라도 사용해야할 이유가 있는 방법을 사용할 거다.&lt;/li>
&lt;li>innodb storage engine 코드에서 Fgrep으로 찾아보니,&lt;/li>
&lt;/ul>







&lt;div class="codeblock">
 
 &lt;div class="copy-button-box">
 &lt;button class="copy-button" state="copy" data="/*%20os/os0proc.cc%20*/%0a%20ptr%20=%20mmap%28nullptr,%20size,%20PROT_READ%20%7c%20PROT_WRITE,%20MAP_PRIVATE%20%7c%20OS_MAP_ANON,%0a%20%20%20%20%20%20%20%20%20%20%20%20-1,%200%29;">
 &lt;i class="bi bi-copy">&lt;/i>
 &lt;/button>
 &lt;/div>
 

 
 &lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-cpp" data-lang="cpp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* os/os0proc.cc */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ptr &lt;span style="color:#f92672">=&lt;/span> mmap(&lt;span style="color:#66d9ef">nullptr&lt;/span>, size, PROT_READ &lt;span style="color:#f92672">|&lt;/span> PROT_WRITE, MAP_PRIVATE &lt;span style="color:#f92672">|&lt;/span> OS_MAP_ANON,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>);&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
 
&lt;/div>
&lt;p>이 내용을 찾았고, 그래서 &lt;code>MAP_PRIVATE&lt;/code>를 b+-Tree를 만들때 사용하기로 했다.
추가적으로 &lt;code>addr&lt;/code> 를 &lt;code>null&lt;/code>을 줄 경우 자동으로 PAGE 단위에 맞게 준다는 걸 알았다.&lt;/p></description></item></channel></rss>
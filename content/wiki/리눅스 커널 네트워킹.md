---
layout: wiki
title: 리눅스 커널 네트워킹
date: 2025-03-11 01:02:19 +0900
lastmod: 2025-03-11 01:18:55 +0900
tags: 
draft: true
parent: 
---
## 1장 들어가며
- 리눅스 네트워크 스택:
	- OSI 7계층:
		- 물리 계층: 전기 신호와 저수준의 세부사항을 처리한다
		- 데이터 링크 계층: 종단 간 데이터 전송을 처리한다. 데이터 링크 계층은 대부분 이더넷이다. 리눅스 이더넷 네트워크 장치 드라이버는 이 계층에 존재한다.
		- 네트워크 계층: 패킷 전달과 호스트 어드레싱을 처리한다.
		- 프로토콜 계층/전송 계층: 노드 사이의 데이터 전달을 처리한다. TCP와 UDP가 가장 잘 알려진 프로토콜이다.
		- 세션 계층: 종단 간의 세션을 처리한다.
		- 표현 계층: 전달과 형식화를 처리한다.
		- 응용 계층: 최종 사용자 프로그램에 네트워크 서비스를 제공한다.
- 네트워크 장치:
	- net_device 구조체:
		- IRQ 번호
		- MTU
		- MAC 주소
		- 장치의 이름
		- 플래그값
		- 연관된 멀티캐스트 주소 목록
		- promiscuity(무차별) 카운터
		- 장치가 지원하는 기능 (GGSO 또는 GRO 오프로딩)
		- 네트워크 장치 콜백 객체
		- ethtool 콜백 객체
		- 멀티 큐를 지원하는 장치일 경우 Tx, Rx 큐의 개수
		- 패킷의 마지막 송신 타임 스탬프
		- 패킷의 마지막 수신 스탬프
- 네트워크 장치의 NAPI(New API)
	- 오래된 네트워크 장치 드라이버는 인터럽트 구동 모드로 동작하는데, 이게 비효율적이다
	- NAPI 는 pooling 으로 동작한다.
	- 패킷은 드라이버에 버퍼링되고 커널이 드라이버를 대상으로 폴링한다.
- 패킷의 수신과 송신
	- 네트워크 장치 드라이버의 주요 작업:
		- 로컬 호스트를 목적지로 하는 패킷을 수신하고, 네트워크 계층(L3)를 거쳐 전송 계층(L4)으로 전달
		- 로컬 호스트에서 생성되어 외부로 나가는 패킷을 전송하거나, 로컬 호스트에서 수신된 패킷을 포워딩
- 소켓버퍼
- 리눅스 커널 네트워킹 개발 모델

## 2장 넷링크 소켓
- 넷링크 계열
	- 구현 대부분 `net/netlink`
- 넷링크 소켓 라이브러리
	- `libnl`
- TCP/IP 네트워킹 제어를 위한 사용자 공간 패키지
	- `net-tools` :
		- ifconfig
		- arp
		- route
		- netstat
		- hostname
		- rarp
	- `iproute2` :
		- ip
		- tc
		- ss
		- lnstat
		- bridge
- 커널 넷링크 소켓
- 
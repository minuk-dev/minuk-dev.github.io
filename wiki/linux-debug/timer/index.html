<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css><meta name=generator content="Hugo 0.140.0"><meta name=description content="minuk.dev wiki"><meta name=keywords content="hugo,site,new"><meta name=author content="Min-Uk.Lee"><title>linux-debug/timer |
minuk dev wiki
</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></head><body><header class=header><div class=header_left></div><div class=header_middle>linux-debug/timer -
minuk dev wiki</div></header><main><aside class=sidebar><ul class=section-tree><li class="dir opened-dir"><span class=dir-text>Front Page</span><ul class=section-tree><li class=file><a href=https://minuk.dev/wiki/kubernetes-community-day-korea/ title=./wiki/kubernetes-community-day-korea/>Kubernetes Community Day 2024</a></li><li class=file><a href=https://minuk.dev/wiki/observability-engineering-kr/ title=./wiki/observability-engineering-kr/>Observability Engineering</a></li><li class=file><a href=https://minuk.dev/wiki/learning-opentelemetry/ title=./wiki/learning-opentelemetry/>Learning OpenTelemetry</a></li><li class=file><a href=https://minuk.dev/wiki/prometheus-native-histograms-in-production/ title=./wiki/prometheus-native-histograms-in-production/>prometheus-native-histograms-in-proudction</a></li><li class=file><a href=https://minuk.dev/wiki/making-sense-of-your-vital-signals-the-future-of-pod-and-containers-monitoring/ title=./wiki/making-sense-of-your-vital-signals-the-future-of-pod-and-containers-monitoring/>Making Sense of Your Vital Signals - The Future of Pod and Containers Monitoring</a></li><li class=file><a href=https://minuk.dev/wiki/defining-a-common-observability-query-language-and-other-observability-tag-updates/ title=./wiki/defining-a-common-observability-query-language-and-other-observability-tag-updates/>Defining A Common Observability Query Language and Other observability TAG Updates</a></li><li class=file><a href=https://minuk.dev/wiki/beyond-tracing-what-do-we-do-with-all-this-data/ title=./wiki/beyond-tracing-what-do-we-do-with-all-this-data/>Beyond Tracing - What do we do with all this data</a></li><li class=file><a href=https://minuk.dev/wiki/grafanacon/ title=./wiki/grafanacon/>grafanacon</a></li><li class=file><a href=https://minuk.dev/wiki/observability-engineering/ title=./wiki/observability-engineering/>Observability Engineering</a></li><li class=file><a href=https://minuk.dev/wiki/rust/ title=./wiki/rust/>rust</a></li><li class=file><a href=https://minuk.dev/wiki/opentelemetry-metrics-deep-dive/ title=./wiki/opentelemetry-metrics-deep-dive/>opentelemetry metrics deep dive</a></li><li class=file><a href=https://minuk.dev/wiki/armeria/ title=./wiki/armeria/>armeria</a></li><li class=file><a href=https://minuk.dev/wiki/kotlin/ title=./wiki/kotlin/>kotlin</a></li><li class=file><a href=https://minuk.dev/wiki/loki-best-practices/ title=./wiki/loki-best-practices/>loki label best practices</a></li><li class=file><a href=https://minuk.dev/wiki/loki/ title=./wiki/loki/>loki</a></li><li class=file><a href=https://minuk.dev/wiki/grafana-loki-like-prometheus-but-for-logs/ title=./wiki/grafana-loki-like-prometheus-but-for-logs/>Grafana Loki - Like Prometheus, But for logs.</a></li><li class=file><a href=https://minuk.dev/wiki/spring-boot-cli/ title=./wiki/spring-boot-cli/>spring boot cli</a></li><li class=file><a href=https://minuk.dev/wiki/autoconf/ title=./wiki/autoconf/>autoconf</a></li><li class=file><a href=https://minuk.dev/wiki/re-minuk-k8s/ title=./wiki/re-minuk-k8s/>다시 시작하는 쿠버네티스 세팅</a></li><li class=file><a href=https://minuk.dev/wiki/cloud-native-go/ title=./wiki/cloud-native-go/>Cloud Native Go</a></li><li class=file><a href=https://minuk.dev/wiki/overlayfs/ title=./wiki/overlayfs/>overlayfs</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/design-pattern/ title=./wiki/lectures/design-pattern/>lectures/design-pattern</a></li><li class=file><a href=https://minuk.dev/wiki/site-reliability-engineering/ title=./wiki/site-reliability-engineering/>사이트 신뢰성 엔지니어링</a></li><li class=file><a href=https://minuk.dev/wiki/to-ipv6-the-dual-stack-adoption-advisory-panel/ title=./wiki/to-ipv6-the-dual-stack-adoption-advisory-panel/>To IPv6 - The Dual-stack Adoption Advisory Panel</a></li><li class=file><a href=https://minuk.dev/wiki/prometheus-intro-and-deep-dive/ title=./wiki/prometheus-intro-and-deep-dive/>Prometheus Intro and Deep Dive</a></li><li class=file><a href=https://minuk.dev/wiki/cs/ title=./wiki/cs/>cs 기본</a></li><li class=file><a href=https://minuk.dev/wiki/coredns/ title=./wiki/coredns/>learning-coredns</a></li><li class=file><a href=https://minuk.dev/wiki/coredns-into-and-deep-dive/ title=./wiki/coredns-into-and-deep-dive/>CoreDNS - Intro and Deep Dive</a></li><li class=file><a href=https://minuk.dev/wiki/deep-dive-into-minikube/ title=./wiki/deep-dive-into-minikube/>Deep Dive into Minikube</a></li><li class=file><a href=https://minuk.dev/wiki/making-your-apps-and-infrastructure-services-failure-resilient-with-dapr/ title=./wiki/making-your-apps-and-infrastructure-services-failure-resilient-with-dapr/>Making Your Apps and Infrastructure Services Failure-Resilient with Dapr</a></li><li class=file><a href=https://minuk.dev/wiki/make-cloud-native-chaos-engineering-easier-deep-dive-into-chaos-mesh/ title=./wiki/make-cloud-native-chaos-engineering-easier-deep-dive-into-chaos-mesh/>Make Cloud Native Chaos Engineering Easier Deep Dive into Chaos Mesh</a></li><li class=file><a href=https://minuk.dev/wiki/selinux/ title=./wiki/selinux/>selinux</a></li><li class=file><a href=https://minuk.dev/wiki/http-go/ title=./wiki/http-go/>go snippet for go</a></li><li class=file><a href=https://minuk.dev/wiki/curl/ title=./wiki/curl/>curl</a></li><li class=file><a href=https://minuk.dev/wiki/volcano-intro-and-deep-dive/ title=./wiki/volcano-intro-and-deep-dive/>Volcano - Intro & Deep Dive</a></li><li class=file><a href=https://minuk.dev/wiki/intro-to-kubernetes-gitops-and-observability-hands-on-tutorial/ title=./wiki/intro-to-kubernetes-gitops-and-observability-hands-on-tutorial/>Intro to Kubernetes, GitOps, and Observability Hands-On Tutorial</a></li><li class=file><a href=https://minuk.dev/wiki/kubespray/ title=./wiki/kubespray/>kubespray</a></li><li class=file><a href=https://minuk.dev/wiki/spark-on-kubernetes-the-elastic-story/ title=./wiki/spark-on-kubernetes-the-elastic-story/>Spark on Kubernetes - The Elastic Story</a></li><li class=file><a href=https://minuk.dev/wiki/devops%EC%99%80-se%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%BB%A4%EB%84%90-%EC%9D%B4%EC%95%BC%EA%B8%B0/ title=./wiki/devops%EC%99%80-se%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%BB%A4%EB%84%90-%EC%9D%B4%EC%95%BC%EA%B8%B0/>DevOps와 SE를 위한 리눅스 커널 이야기</a></li><li class=file><a href=https://minuk.dev/wiki/running-containerd-and-k3s-on-macos/ title=./wiki/running-containerd-and-k3s-on-macos/>Running Containerd and k3s on MacOS</a></li><li class=file><a href=https://minuk.dev/wiki/twelve-factor-app/ title=./wiki/twelve-factor-app/>12요소 어플리케이션</a></li><li class=file><a href=https://minuk.dev/wiki/vim-go/ title=./wiki/vim-go/>vim/vim-go</a></li><li class=file><a href=https://minuk.dev/wiki/kubernetes-patterns/ title=./wiki/kubernetes-patterns/>쿠버네티스 패턴</a></li><li class=file><a href=https://minuk.dev/wiki/horizontalpodautoscaler/ title=./wiki/horizontalpodautoscaler/>Horizontal Pod AutoScaler</a></li><li class=file><a href=https://minuk.dev/wiki/what-if-kube-apiserver-could-be-extended-via-webassembly/ title=./wiki/what-if-kube-apiserver-could-be-extended-via-webassembly/>What If… Kube-Apiserver Could be Extended Via WebAssembly?</a></li><li class=file><a href=https://minuk.dev/wiki/the-future-of-reproducible-research-powered-by-kubeflow/ title=./wiki/the-future-of-reproducible-research-powered-by-kubeflow/>The Future Of Reproducible Research - Powered by Kubeflow</a></li><li class=file><a href=https://minuk.dev/wiki/this-is-the-way-a-crash-course-on-intricacies-of-managing-cpus/ title=./wiki/this-is-the-way-a-crash-course-on-intricacies-of-managing-cpus/>This is The Way- A Crash Course on the Intricacies of Managing CPUs in K8s</a></li><li class=file><a href=https://minuk.dev/wiki/kubernetes-graceful-shutdown/ title=./wiki/kubernetes-graceful-shutdown/>kubernetes-graceful-shutdown</a></li><li class=file><a href=https://minuk.dev/wiki/dockerfile/ title=./wiki/dockerfile/>dockerfile</a></li><li class=file><a href=https://minuk.dev/wiki/automated-progressive-delivery-using-gitops-and-service-mesh/ title=./wiki/automated-progressive-delivery-using-gitops-and-service-mesh/>Automated Progressive Delivery Using GitOps and Service Mesh</a></li><li class=file><a href=https://minuk.dev/wiki/containerd-proejct-update-and-deep-dive/ title=./wiki/containerd-proejct-update-and-deep-dive/>containerd Project Update and Deep Dive</a></li><li class=file><a href=https://minuk.dev/wiki/http2/ title=./wiki/http2/>http2 탐구</a></li><li class=file><a href=https://minuk.dev/wiki/grpc-for-microservices/ title=./wiki/grpc-for-microservices/>gRPC For Microservices Service-mesh and Observability</a></li><li class=file><a href=https://minuk.dev/wiki/kubecon/ title=./wiki/kubecon/>kubecon</a></li><li class=file><a href=https://minuk.dev/wiki/go-http/ title=./wiki/go-http/>go-http</a></li><li class=file><a href=https://minuk.dev/wiki/go/ title=./wiki/go/>go</a></li><li class=file><a href=https://minuk.dev/wiki/cri/ title=./wiki/cri/>CRI(Container Runtime Interface)</a></li><li class=file><a href=https://minuk.dev/wiki/vagrant/ title=./wiki/vagrant/>vagrant</a></li><li class=file><a href=https://minuk.dev/wiki/jsonpath/ title=./wiki/jsonpath/>jsonpath</a></li><li class=file><a href=https://minuk.dev/wiki/systemctl/ title=./wiki/systemctl/>systemctl 중요한것만 정리</a></li><li class=file><a href=https://minuk.dev/wiki/init/ title=./wiki/init/>linux init 요약</a></li><li class=file><a href=https://minuk.dev/wiki/process-cli/ title=./wiki/process-cli/>process 관련된 명령어 모음</a></li><li class=file><a href=https://minuk.dev/wiki/process-status/ title=./wiki/process-status/>process-status</a></li><li class=file><a href=https://minuk.dev/wiki/teamnote-go/ title=./wiki/teamnote-go/>teamnote-go</a></li><li class=file><a href=https://minuk.dev/wiki/cgroups/ title=./wiki/cgroups/>cgroup</a></li><li class=file><a href=https://minuk.dev/wiki/namespaces/ title=./wiki/namespaces/>namespaces</a></li><li class=file><a href=https://minuk.dev/wiki/lxc/ title=./wiki/lxc/>LXC</a></li><li class=file><a href=https://minuk.dev/wiki/devops/ title=./wiki/devops/>devops</a></li><li class=file><a href=https://minuk.dev/wiki/ringle/supply-and-demand/ title=./wiki/ringle/supply-and-demand/>Supply and Demand</a></li><li class=file><a href=https://minuk.dev/wiki/ringle/the-metaverse/ title=./wiki/ringle/the-metaverse/>ringle/The metaverse</a></li><li class=file><a href=https://minuk.dev/wiki/ringle/microsoft-x-activision-blizzard/ title=./wiki/ringle/microsoft-x-activision-blizzard/>ringle/Microsoft x Activision Blizzard</a></li><li class=file><a href=https://minuk.dev/wiki/topcit/ title=./wiki/topcit/>topcit 간략 공부</a></li><li class=file><a href=https://minuk.dev/wiki/software-engineering-at-google/ title=./wiki/software-engineering-at-google/>구글 엔지니어는 이렇게 일한다</a></li><li class=file><a href=https://minuk.dev/wiki/k8s-in-rpi/ title=./wiki/k8s-in-rpi/>k8s-in-rpi</a></li><li class=file><a href=https://minuk.dev/wiki/kubernetes/ title=./wiki/kubernetes/>kubernetes</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/numerical_analysis/ title=./wiki/lectures/numerical_analysis/>수치해석</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/information_security_theory/ title=./wiki/lectures/information_security_theory/>2022-1 정보보호이론</a></li><li class=file><a href=https://minuk.dev/wiki/%EC%A0%9C%ED%85%94%EC%B9%B4%EC%8A%A4%ED%85%90/ title=./wiki/%EC%A0%9C%ED%85%94%EC%B9%B4%EC%8A%A4%ED%85%90/>제텔카스텐</a></li><li class=file><a href=https://minuk.dev/wiki/%EB%A7%81%EA%B8%80/autonomous/ title=./wiki/%EB%A7%81%EA%B8%80/autonomous/>링글/Autonomous</a></li><li class=file><a href=https://minuk.dev/wiki/%EB%A7%81%EA%B8%80/metaverse/ title=./wiki/%EB%A7%81%EA%B8%80/metaverse/>링글/Metaverse</a></li><li class=file><a href=https://minuk.dev/wiki/algorithm/ title=./wiki/algorithm/>algorithm</a></li><li class=file><a href=https://minuk.dev/wiki/study-note/ title=./wiki/study-note/>study-note</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/machine-learning/ title=./wiki/lectures/machine-learning/>2022 1학기 머신러닝</a></li><li class=file><a href=https://minuk.dev/wiki/kubernetes-in-action/ title=./wiki/kubernetes-in-action/>Kubernetes in action</a></li><li class=file><a href=https://minuk.dev/wiki/effective-java/ title=./wiki/effective-java/>Effective Java</a></li><li class=file><a href=https://minuk.dev/wiki/kafka/ title=./wiki/kafka/>Kafka</a></li><li class=file><a href=https://minuk.dev/wiki/%EB%A9%B4%EC%A0%91%EC%A4%80%EB%B9%84/ title=./wiki/%EB%A9%B4%EC%A0%91%EC%A4%80%EB%B9%84/>면접 준비 자료</a></li><li class=file><a href=https://minuk.dev/wiki/zsh/ title=./wiki/zsh/>zsh</a></li><li class=file><a href=https://minuk.dev/wiki/simple-file/ title=./wiki/simple-file/>Simple한 File Server</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2021-12-03/ title=./wiki/%ED%9A%8C%EA%B3%A0/2021-12-03/>회고/2021-12-03</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/bayesian/week3/ title=./wiki/lectures/bayesian/week3/>bayesian/week3</a></li><li class=file><a href=https://minuk.dev/wiki/jupyter/ title=./wiki/jupyter/>jupyter notebook</a></li><li class=file><a href=https://minuk.dev/wiki/ffmpeg/ title=./wiki/ffmpeg/>ffmpeg 를 사용한 convert 요약</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/bayesian/week2/ title=./wiki/lectures/bayesian/week2/>bayesian/week2</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/bayesian/week1/ title=./wiki/lectures/bayesian/week1/>bayesian/week1</a></li><li class=file><a href=https://minuk.dev/wiki/pdf-test/ title=./wiki/pdf-test/>pdf-test</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/automata/ title=./wiki/lectures/automata/>오토마타와 형식언어 정리</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/computer-communication/ title=./wiki/lectures/computer-communication/>컴퓨터통신</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/introduction-to-statistical-learning/ title=./wiki/lectures/introduction-to-statistical-learning/>통계학습개론(Introduction to statistical learnning) 수업 정리</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/bayesian-statistics/ title=./wiki/lectures/bayesian-statistics/>베이지안 통계학(Bayesian Statistics)</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/multi-variant-statistical-analysis/ title=./wiki/lectures/multi-variant-statistical-analysis/>Multi Variant Statistical Analysis</a></li><li class=file><a href=https://minuk.dev/wiki/comment/ title=./wiki/comment/>주석 관련 좋은 글</a></li><li class=file><a href=https://minuk.dev/wiki/ssh/ title=./wiki/ssh/>ssh 관련 명령어 모음</a></li><li class=file><a href=https://minuk.dev/wiki/msk/ title=./wiki/msk/>amazon msk 삽질</a></li><li class=file><a href=https://minuk.dev/wiki/keras-book/ title=./wiki/keras-book/>케라스 창시자에게 배우는 딥러닝 책 공부</a></li><li class=file><a href=https://minuk.dev/wiki/msa-from-ddd/ title=./wiki/msa-from-ddd/>도메인 주도 설계로 시작하는 마이크로서비스 개발</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2021-07-18/ title=./wiki/%ED%9A%8C%EA%B3%A0/2021-07-18/>2021-07-21 회고</a></li><li class=file><a href=https://minuk.dev/wiki/iamroot19/ title=./wiki/iamroot19/>아이엠루트 스터디 자료 정리</a></li><li class=file><a href=https://minuk.dev/wiki/boj-9019/ title=./wiki/boj-9019/>boj-9019</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2021-06-19/ title=./wiki/%ED%9A%8C%EA%B3%A0/2021-06-19/>2021년 6월 19일 회고</a></li><li class=file><a href=https://minuk.dev/wiki/%EB%8F%85%EC%84%B1%EB%A7%90%ED%88%AC/ title=./wiki/%EB%8F%85%EC%84%B1%EB%A7%90%ED%88%AC/>독성말투</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/regression/ title=./wiki/lectures/regression/>Regression Analysis</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%94%BC%EC%8B%9C%EC%8B%A4/ title=./wiki/%ED%94%BC%EC%8B%9C%EC%8B%A4/>피시실</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/multicore/ title=./wiki/lectures/multicore/>Multicore Computing</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/ns3/ title=./wiki/lectures/ns3/>Network Simulator 3</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/nonparametric-statistic/ title=./wiki/lectures/nonparametric-statistic/>비모수 통계학</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/wireless/ title=./wiki/lectures/wireless/>wireless 무선이동통신 수업</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/database_system/ title=./wiki/lectures/database_system/>Database System</a></li><li class=file><a href=https://minuk.dev/wiki/%EC%B9%B4%EC%B9%B4%EC%98%A4%EC%9B%8C%ED%81%AC/ title=./wiki/%EC%B9%B4%EC%B9%B4%EC%98%A4%EC%9B%8C%ED%81%AC/>카카오워크</a></li><li class=file><a href=https://minuk.dev/wiki/soma/ title=./wiki/soma/>소프트웨어 마에스트로</a></li><li class=file><a href=https://minuk.dev/wiki/linux_kakaotalk/ title=./wiki/linux_kakaotalk/>리눅스 카카오톡</a></li><li class=file><a href=https://minuk.dev/wiki/latina/ title=./wiki/latina/>라틴어</a></li><li class=file><a href=https://minuk.dev/wiki/blk-mq/ title=./wiki/blk-mq/>Multi-Queue Block IO Queueing (blk-mq)</a></li><li class=file><a href=https://minuk.dev/wiki/linux-study/ title=./wiki/linux-study/>linux-study</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-12-20/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-12-20/>2020-12-20 회고</a></li><li class=file><a href=https://minuk.dev/wiki/linux-debug/scheduling/ title=./wiki/linux-debug/scheduling/>linux-debug/scheduling</a></li><li class=file><a href=https://minuk.dev/wiki/linux-debug/synchronization/ title=./wiki/linux-debug/synchronization/>linux-debug/synchronization</a></li><li class=file><a href=https://minuk.dev/wiki/linux-debug/timer/ title=./wiki/linux-debug/timer/>linux-debug/timer</a></li><li class=file><a href=https://minuk.dev/wiki/linux-debug/workqueue/ title=./wiki/linux-debug/workqueue/>linux-debug/workqueue</a></li><li class=file><a href=https://minuk.dev/wiki/linux-debug/interrupt/ title=./wiki/linux-debug/interrupt/>linux-debug/interrupt</a></li><li class=file><a href=https://minuk.dev/wiki/linux-debug/process/ title=./wiki/linux-debug/process/>linux-debug/process</a></li><li class=file><a href=https://minuk.dev/wiki/input-method/ title=./wiki/input-method/>linux input-method 삽질</a></li><li class=file><a href=https://minuk.dev/wiki/assembly/ title=./wiki/assembly/>assembly</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-10-24/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-10-24/>2020-10-24 회고</a></li><li class=file><a href=https://minuk.dev/wiki/contextmenu/ title=./wiki/contextmenu/>contextmenu</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-10-09/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-10-09/>2020-10-09 회고</a></li><li class=file><a href=https://minuk.dev/wiki/others/ title=./wiki/others/>others</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-09-18/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-09-18/>2020-09-18 회고</a></li><li class=file><a href=https://minuk.dev/wiki/seccomp/ title=./wiki/seccomp/>seccomp</a></li><li class=file><a href=https://minuk.dev/wiki/debug-linux/ title=./wiki/debug-linux/>디버깅을 통해 배우는 리눅스 커널의 구조와 원리</a></li><li class=file><a href=https://minuk.dev/wiki/fuse/ title=./wiki/fuse/>Filesystem in Userspace</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-08-30/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-08-30/>회고/2020-08-30</a></li><li class=file><a href=https://minuk.dev/wiki/raid/ title=./wiki/raid/>RAID(Redundant Array of Independent Disks)</a></li><li class=file><a href=https://minuk.dev/wiki/storage/ title=./wiki/storage/>Storage</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-08-17/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-08-17/>2020-08-17 회고</a></li><li class=file><a href=https://minuk.dev/wiki/teamnote/ title=./wiki/teamnote/>teamnote</a></li><li class=file><a href=https://minuk.dev/wiki/git/ title=./wiki/git/>git</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-07-31/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-07-31/>2020년 7월 31일자 회고</a></li><li class=file><a href=https://minuk.dev/wiki/3%EA%B3%B5%EB%85%B8%ED%8A%B8/ title=./wiki/3%EA%B3%B5%EB%85%B8%ED%8A%B8/>3공 노트</a></li><li class=file><a href=https://minuk.dev/wiki/nas/ title=./wiki/nas/>NAS</a></li><li class=file><a href=https://minuk.dev/wiki/lfs/ title=./wiki/lfs/>LFS Paper</a></li><li class=file><a href=https://minuk.dev/wiki/ftl/ title=./wiki/ftl/>Flash Translation Layer</a></li><li class=file><a href=https://minuk.dev/wiki/ppn/ title=./wiki/ppn/>PPN(Physical Page Number)</a></li><li class=file><a href=https://minuk.dev/wiki/lpn/ title=./wiki/lpn/>LPN(Logical Page Number)</a></li><li class=file><a href=https://minuk.dev/wiki/load-balance/ title=./wiki/load-balance/>Load Balance</a></li><li class=file><a href=https://minuk.dev/wiki/cache/ title=./wiki/cache/>Cache</a></li><li class=file><a href=https://minuk.dev/wiki/uart/ title=./wiki/uart/>UART (Universal asynchronous receiver/transmitter)</a></li><li class=file><a href=https://minuk.dev/wiki/vhdci/ title=./wiki/vhdci/>VHDCI (Very-high-dencity cable interconnect)</a></li><li class=file><a href=https://minuk.dev/wiki/boxplot/ title=./wiki/boxplot/>boxplot</a></li><li class=file><a href=https://minuk.dev/wiki/quartile/ title=./wiki/quartile/>quartile (사분위수)</a></li><li class=file><a href=https://minuk.dev/wiki/statistics/ title=./wiki/statistics/>statistics</a></li><li class=file><a href=https://minuk.dev/wiki/fsm/ title=./wiki/fsm/>FSM (Finite State machine)</a></li><li class=file><a href=https://minuk.dev/wiki/open-nvm/ title=./wiki/open-nvm/>open-nvm</a></li><li class=file><a href=https://minuk.dev/wiki/mram/ title=./wiki/mram/>MRAM (Magnetic Random Access Memory)</a></li><li class=file><a href=https://minuk.dev/wiki/file/ title=./wiki/file/>vfs - file</a></li><li class=file><a href=https://minuk.dev/wiki/kiocb/ title=./wiki/kiocb/>kiocb</a></li><li class=file><a href=https://minuk.dev/wiki/vfs/ title=./wiki/vfs/>VFS-Virtual File System</a></li><li class=file><a href=https://minuk.dev/wiki/linux/ title=./wiki/linux/>linux</a></li><li class=file><a href=https://minuk.dev/wiki/f2fs-paper/ title=./wiki/f2fs-paper/>F2FS- A New File System for Flash Storage</a></li><li class=file><a href=https://minuk.dev/wiki/english/proverb/ title=./wiki/english/proverb/>english/proverb</a></li><li class=file><a href=https://minuk.dev/wiki/english/ title=./wiki/english/>english</a></li><li class=file><a href=https://minuk.dev/wiki/tool/ title=./wiki/tool/>tool</a></li><li class=file><a href=https://minuk.dev/wiki/verilog/ title=./wiki/verilog/>verilog (베릴로그)</a></li><li class=file><a href=https://minuk.dev/wiki/iommu/ title=./wiki/iommu/>IOMMU (Input Output Memory Management Unit)</a></li><li class=file><a href=https://minuk.dev/wiki/delayed_work/ title=./wiki/delayed_work/>delayed work</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-06-21/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-06-21/>회고/2020-06-21</a></li><li class=file><a href=https://minuk.dev/wiki/jwt/ title=./wiki/jwt/>json web token(jwt)</a></li><li class=file><a href=https://minuk.dev/wiki/tmuxinator/ title=./wiki/tmuxinator/>tmuxinator</a></li><li class=file><a href=https://minuk.dev/wiki/vim-staritfy/ title=./wiki/vim-staritfy/>vim-startify</a></li><li class=file><a href=https://minuk.dev/wiki/my-page/ title=./wiki/my-page/>my-page (나만의 홈페이지 만들기)</a></li><li class=file><a href=https://minuk.dev/wiki/blk_mq/ title=./wiki/blk_mq/>blk_mq</a></li><li class=file><a href=https://minuk.dev/wiki/prp/ title=./wiki/prp/>PRP (Physical Region Page)</a></li><li class=file><a href=https://minuk.dev/wiki/numa/ title=./wiki/numa/>NUMA</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-06-17/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-06-17/>회고/2020-06-17</a></li><li class=file><a href=https://minuk.dev/wiki/block-layer/ title=./wiki/block-layer/>block layer</a></li><li class=file><a href=https://minuk.dev/wiki/workqueue/ title=./wiki/workqueue/>workqueue</a></li><li class=file><a href=https://minuk.dev/wiki/nvme/ title=./wiki/nvme/>nvme</a></li><li class=file><a href=https://minuk.dev/wiki/gem5/ title=./wiki/gem5/>gem5</a></li><li class=file><a href=https://minuk.dev/wiki/simplessd/ title=./wiki/simplessd/>simple-ssd</a></li><li class=file><a href=https://minuk.dev/wiki/mmap/ title=./wiki/mmap/>mmap</a></li><li class=file><a href=https://minuk.dev/wiki/b+tree/ title=./wiki/b+tree/>B+ Tree</a></li><li class=file><a href=https://minuk.dev/wiki/database/ title=./wiki/database/>Database</a></li><li class=file><a href=https://minuk.dev/wiki/memory-cache-clean/ title=./wiki/memory-cache-clean/>memory cache 비우기 (linux command)</a></li><li class=file><a href=https://minuk.dev/wiki/free/ title=./wiki/free/>free (linux command)</a></li><li class=file><a href=https://minuk.dev/wiki/clflush/ title=./wiki/clflush/>clflush (cache line flush)</a></li><li class=file><a href=https://minuk.dev/wiki/c++/ title=./wiki/c++/>C++ Language</a></li><li class=file><a href=https://minuk.dev/wiki/%EC%82%AC%EC%A7%80%EB%B0%A9/ title=./wiki/%EC%82%AC%EC%A7%80%EB%B0%A9/>사지방</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/3%EC%9B%94/ title=./wiki/%ED%9A%8C%EA%B3%A0/3%EC%9B%94/>2020년 3월 회고</a></li><li class=file><a href=https://minuk.dev/wiki/mysql/ title=./wiki/mysql/>mysql (storage engine)</a></li><li class=file><a href=https://minuk.dev/wiki/block-group/ title=./wiki/block-group/>block group</a></li><li class=file><a href=https://minuk.dev/wiki/journal/ title=./wiki/journal/>journal(journaling)</a></li><li class=file><a href=https://minuk.dev/wiki/group-descriptor-table/ title=./wiki/group-descriptor-table/>group descriptor table</a></li><li class=file><a href=https://minuk.dev/wiki/inode/ title=./wiki/inode/>inode</a></li><li class=file><a href=https://minuk.dev/wiki/superblock/ title=./wiki/superblock/>Superblock</a></li><li class=file><a href=https://minuk.dev/wiki/ext4/ title=./wiki/ext4/>The new ext4 filesystem: current status and future plans</a></li><li class=file><a href=https://minuk.dev/wiki/%EA%B3%84%EB%A3%A1-%EA%B0%9C%EB%B0%9C-%EB%AA%A8%EC%9E%84/ title=./wiki/%EA%B3%84%EB%A3%A1-%EA%B0%9C%EB%B0%9C-%EB%AA%A8%EC%9E%84/>계룡 개발 모임</a></li><li class=file><a href=https://minuk.dev/wiki/ssd/ title=./wiki/ssd/>SSD</a></li><li class=file><a href=https://minuk.dev/wiki/gutentags/ title=./wiki/gutentags/>gutentags</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-18--%EB%A9%94%EB%A9%98%ED%86%A0/ title=./wiki/modern-c++-design-pattern/chapter-18--%EB%A9%94%EB%A9%98%ED%86%A0/>Modern C++ Design Pattern/Chatper 18. 메멘토</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-17--%EB%A7%A4%EA%B0%9C%EC%9E%90/ title=./wiki/modern-c++-design-pattern/chapter-17--%EB%A7%A4%EA%B0%9C%EC%9E%90/>Modern C++ Design Pattern/Chatper 17. 매개자</a></li><li class=file><a href=https://minuk.dev/wiki/boj/ title=./wiki/boj/>boj</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-16--%EB%B0%98%EB%B3%B5%EC%9E%90/ title=./wiki/modern-c++-design-pattern/chapter-16--%EB%B0%98%EB%B3%B5%EC%9E%90/>Modern C++ Design Pattern/Chatper 16. 반복자</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-04-20/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-04-20/>회고/2020.04.20</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-15--%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0/ title=./wiki/modern-c++-design-pattern/chapter-15--%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0/>Modern C++ Design Pattern/Chatper 15. 인터프리터</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-14--%EC%BB%A4%EB%A7%A8%EB%93%9C/ title=./wiki/modern-c++-design-pattern/chapter-14--%EC%BB%A4%EB%A7%A8%EB%93%9C/>Modern C++ Design Pattern/Chatper 14. 커맨드</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-13--%EC%B1%85%EC%9E%84%EC%82%AC%EC%8A%ACchain-of-responsibility/ title=./wiki/modern-c++-design-pattern/chapter-13--%EC%B1%85%EC%9E%84%EC%82%AC%EC%8A%ACchain-of-responsibility/>Modern C++ Design Pattern/Chatper 13. 책임사슬(Chain of Responsibility)</a></li><li class=file><a href=https://minuk.dev/wiki/coc/ title=./wiki/coc/>coc (vim plugin coc)</a></li><li class=file><a href=https://minuk.dev/wiki/regex/ title=./wiki/regex/>Regular Expression (regex)</a></li><li class=file><a href=https://minuk.dev/wiki/glob/ title=./wiki/glob/>glob</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-12--%ED%94%84%EB%A1%9D%EC%8B%9C/ title=./wiki/modern-c++-design-pattern/chapter-12--%ED%94%84%EB%A1%9D%EC%8B%9C/>Modern C++ Design Pattern/Chapter 12. 프록시</a></li><li class=file><a href=https://minuk.dev/wiki/hugo/ title=./wiki/hugo/>hugo</a></li><li class=file><a href=https://minuk.dev/wiki/tee/ title=./wiki/tee/>tee (Linux Command)</a></li><li class=file><a href=https://minuk.dev/wiki/rm/ title=./wiki/rm/>rm (Linux Command)</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-11--%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8/ title=./wiki/modern-c++-design-pattern/chapter-11--%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8/>Modern C++ Design Pattern/Chapter 11. 플라이웨이트</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-10--%ED%8D%BC%EC%82%AC%EB%93%9C/ title=./wiki/modern-c++-design-pattern/chapter-10--%ED%8D%BC%EC%82%AC%EB%93%9C/>Modern C++ Design Pattern/Chapter 10. 퍼사드</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chapter-7--%EC%8B%A4%ED%96%89-%EC%8B%9C%EA%B0%84-%EA%B8%B0%EB%B2%95/ title=./wiki/effective-debugging/chapter-7--%EC%8B%A4%ED%96%89-%EC%8B%9C%EA%B0%84-%EA%B8%B0%EB%B2%95/>Effective Debugging/Chatper 7. 컴파일 시간 기법</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chapter-8--%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%93%9C-%EC%BD%94%EB%93%9C-%EB%94%94%EB%B2%84%EA%B9%85/ title=./wiki/effective-debugging/chapter-8--%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%93%9C-%EC%BD%94%EB%93%9C-%EB%94%94%EB%B2%84%EA%B9%85/>Effective Debugging/Chatper 8. 멀티스레드 코드 디버깅</a></li><li class=file><a href=https://minuk.dev/wiki/todo/ title=./wiki/todo/>TODO Lists</a></li><li class=file><a href=https://minuk.dev/wiki/vim/ title=./wiki/vim/>vim</a></li><li class=file><a href=https://minuk.dev/wiki/vimwiki/ title=./wiki/vimwiki/>vimwiki</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-04-08/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-04-08/>회고/2020-04-08</a></li><li class=file><a href=https://minuk.dev/wiki/cloudatcost/ title=./wiki/cloudatcost/>cloudatcost</a></li><li class=file><a href=https://minuk.dev/wiki/web/ title=./wiki/web/>web</a></li><li class=file><a href=https://minuk.dev/wiki/nginx/ title=./wiki/nginx/>nginx</a></li><li class=file><a href=https://minuk.dev/wiki/understanding-linux-kernel/ title=./wiki/understanding-linux-kernel/>Understanding Linux Kernel</a></li><li class=file><a href=https://minuk.dev/wiki/mathematical-statistics/ title=./wiki/mathematical-statistics/>Mathematical Statistics</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/ title=./wiki/effective-debugging/>Effective Debugging</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chapter-1--%EA%B3%A0%EC%B0%A8%EC%9B%90-%EC%A0%84%EB%9E%B5/ title=./wiki/effective-debugging/chapter-1--%EA%B3%A0%EC%B0%A8%EC%9B%90-%EC%A0%84%EB%9E%B5/>Effective Debugging/Chapter 1. 고차원 전략</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chapter-2--%EB%B2%94%EC%9A%A9%EC%A0%81%EC%9D%B8-%EB%94%94%EB%B2%84%EA%B9%85-%EA%B8%B0%EB%B2%95/ title=./wiki/effective-debugging/chapter-2--%EB%B2%94%EC%9A%A9%EC%A0%81%EC%9D%B8-%EB%94%94%EB%B2%84%EA%B9%85-%EA%B8%B0%EB%B2%95/>Effective Debugging/Chapter 2. 범용적인 디버깅 기법</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chapter-3--%EB%B2%94%EC%9A%A9-%EB%8F%84%EA%B5%AC%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EA%B8%B0%EB%B2%95/ title=./wiki/effective-debugging/chapter-3--%EB%B2%94%EC%9A%A9-%EB%8F%84%EA%B5%AC%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EA%B8%B0%EB%B2%95/>Effective Debugging/Chapter 3. 범용 도구를 활용한 기법</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chapter-5--%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EA%B8%B0%EB%B2%95/ title=./wiki/effective-debugging/chapter-5--%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EA%B8%B0%EB%B2%95/>Effective Debugging/Chapter 5. 프로그래밍 기법</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chatper-4--%EB%94%94%EB%B2%84%EA%B1%B0-%ED%99%9C%EC%9A%A9%EB%B2%95/ title=./wiki/effective-debugging/chatper-4--%EB%94%94%EB%B2%84%EA%B1%B0-%ED%99%9C%EC%9A%A9%EB%B2%95/>Effective Debugging/Chatper 4. 디버거 활용법</a></li><li class=file><a href=https://minuk.dev/wiki/effective-debugging/chatper-6--%EC%BB%B4%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EA%B0%84-%EA%B8%B0%EB%B2%95/ title=./wiki/effective-debugging/chatper-6--%EC%BB%B4%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EA%B0%84-%EA%B8%B0%EB%B2%95/>Effective Debugging/Chatper 6. 컴파일 시간 기법</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/ title=./wiki/modern-c++-design-pattern/>Modern C++ Design Pattern</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-1--%EA%B0%9C%EC%9A%94/ title=./wiki/modern-c++-design-pattern/chapter-1--%EA%B0%9C%EC%9A%94/>Modern C++ Design Pattern/Chatper 1. 개요</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-2--%EB%B9%8C%EB%8D%94/ title=./wiki/modern-c++-design-pattern/chapter-2--%EB%B9%8C%EB%8D%94/>Modern C++ Design Pattern/Chatper 2. 빌더</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-4--%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85/ title=./wiki/modern-c++-design-pattern/chapter-4--%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85/>Modern C++ Design Pattern/Chatper 4. 프로토타입</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-5--%EC%8B%B1%EA%B8%80%ED%84%B4/ title=./wiki/modern-c++-design-pattern/chapter-5--%EC%8B%B1%EA%B8%80%ED%84%B4/>Modern C++ Design Pattern/Chatper 5. 싱글턴</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-6--%EC%96%B4%EB%8C%91%ED%84%B0/ title=./wiki/modern-c++-design-pattern/chapter-6--%EC%96%B4%EB%8C%91%ED%84%B0/>Modern C++ Design Pattern/Chatper 6. 어댑터</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-7--%EB%B8%8C%EB%A6%BF%EC%A7%80/ title=./wiki/modern-c++-design-pattern/chapter-7--%EB%B8%8C%EB%A6%BF%EC%A7%80/>Modern C++ Design Pattern/Chatper 7. 브릿지</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-8--%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8/ title=./wiki/modern-c++-design-pattern/chapter-8--%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8/>Modern C++ Design Pattern/Chatper 8. 컴포지트</a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-9--%EB%8D%B0%EC%BD%94%EB%A0%88%EC%9D%B4%ED%84%B0/ title=./wiki/modern-c++-design-pattern/chapter-9--%EB%8D%B0%EC%BD%94%EB%A0%88%EC%9D%B4%ED%84%B0/>Modern C++ Design Pattern/Chatper 9. 데코레이터</a></li><li class=file><a href=https://minuk.dev/wiki/book-reviews/ title=./wiki/book-reviews/>Book Review</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/algorithm/ title=./wiki/lectures/algorithm/>lectures/algorithm</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/computer-architecture/ title=./wiki/lectures/computer-architecture/>lectures/computer architecture</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/image-processing/ title=./wiki/lectures/image-processing/>lectures/image processing</a></li><li class=file><a href=https://minuk.dev/wiki/lectures/ title=./wiki/lectures/>학교 수업</a></li><li class=file><a href=https://minuk.dev/wiki/tool-configuration/ title=./wiki/tool-configuration/>Tool configuration</a></li><li class=file><a href=https://minuk.dev/wiki/ssh-server/ title=./wiki/ssh-server/>SSH Server Configuration</a></li><li class=file><a href=https://minuk.dev/wiki/firewall/ title=./wiki/firewall/>Firewall (방화벽) Configuration</a></li><li class=file><a href=https://minuk.dev/wiki/ftp/ title=./wiki/ftp/>ftp server command</a></li><li class=file><a href=https://minuk.dev/wiki/user/ title=./wiki/user/>linux user command</a></li><li class=file><a href=https://minuk.dev/wiki/brightness/ title=./wiki/brightness/>Brightness (화면 밝기 조절) command</a></li><li class=file><a href=https://minuk.dev/wiki/wifi-command-line/ title=./wiki/wifi-command-line/>Wifi commands</a></li><li class=file><a href=https://minuk.dev/wiki/wifi/ title=./wiki/wifi/>Wifi commands</a></li><li class=file><a href=https://minuk.dev/wiki/linux-command/ title=./wiki/linux-command/>Linux Command 모음</a></li><li class=file><a href=https://minuk.dev/wiki/docker/ title=./wiki/docker/>docker</a></li><li class=file><a href=https://minuk.dev/wiki/sql/ title=./wiki/sql/>SQL</a></li><li class=file><a href=https://minuk.dev/wiki/typescript/function/ title=./wiki/typescript/function/>Typescript/Function</a></li><li class=file><a href=https://minuk.dev/wiki/typescript/class/ title=./wiki/typescript/class/>Typescript/Class</a></li><li class=file><a href=https://minuk.dev/wiki/typescript/interface/ title=./wiki/typescript/interface/>Typescript/Interface</a></li><li class=file><a href=https://minuk.dev/wiki/typescript/variable-declaration/ title=./wiki/typescript/variable-declaration/>Typescript/Variable Declaration</a></li><li class=file><a href=https://minuk.dev/wiki/typescript/types/ title=./wiki/typescript/types/>Typescript/Types</a></li><li class=file><a href=https://minuk.dev/wiki/typescript/ title=./wiki/typescript/>Typescript</a></li><li class=file><a href=https://minuk.dev/wiki/graphql-typescript/ title=./wiki/graphql-typescript/>graphql typescript (deprecated)</a></li><li class=file><a href=https://minuk.dev/wiki/winston/ title=./wiki/winston/>winston</a></li><li class=file><a href=https://minuk.dev/wiki/jest/ title=./wiki/jest/>Jest</a></li><li class=file><a href=https://minuk.dev/wiki/sequelize/ title=./wiki/sequelize/>Sequelize</a></li><li class=file><a href=https://minuk.dev/wiki/fetch/ title=./wiki/fetch/>Fetch 문법 간단 정리</a></li><li class=file><a href=https://minuk.dev/wiki/promise/ title=./wiki/promise/>Promise 정리</a></li><li class=file><a href=https://minuk.dev/wiki/javascript/ title=./wiki/javascript/>JavaScript</a></li><li class=file><a href=https://minuk.dev/wiki/nexus/ title=./wiki/nexus/>Nexus</a></li><li class=file><a href=https://minuk.dev/wiki/ssdsolid-state-drive/ title=./wiki/ssdsolid-state-drive/>SSD(Solid-State Drive)</a></li><li class=file><a href=https://minuk.dev/wiki/pintos/ title=./wiki/pintos/>Pintos</a></li><li class=file><a href=https://minuk.dev/wiki/%EB%B2%84%EC%8A%A4-%EC%8B%9C%EA%B0%84-%EB%A9%94%EB%AA%A8/ title=./wiki/%EB%B2%84%EC%8A%A4-%EC%8B%9C%EA%B0%84-%EB%A9%94%EB%AA%A8/>Bus 시간 메모</a></li><li class=file><a href=https://minuk.dev/wiki/5-articles-per-week/ title=./wiki/5-articles-per-week/>5 articles per week</a></li><li class=file><a href=https://minuk.dev/wiki/%EC%8D%A9%EC%96%B4%EB%B2%84%EB%A6%B0-query-language/ title=./wiki/%EC%8D%A9%EC%96%B4%EB%B2%84%EB%A6%B0-query-language/>썩어버린 Query Language</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/ title=./wiki/%ED%9A%8C%EA%B3%A0/>회고 모음</a></li><li class=file><a href=https://minuk.dev/wiki/memory_leak/ title=./wiki/memory_leak/>Javascript Memory Leak</a></li><li class=file><a href=https://minuk.dev/wiki/%EC%86%A1%ED%8E%B8%EB%8C%80%ED%9A%8C/ title=./wiki/%EC%86%A1%ED%8E%B8%EB%8C%80%ED%9A%8C/>송편 생성기 (추석 대회)</a></li><li class=file><a href=https://minuk.dev/wiki/endurable_transient_inconsistency_in_byte_addressable_persistent_b+-tree/ title=./wiki/endurable_transient_inconsistency_in_byte_addressable_persistent_b+-tree/>Endurable Transient Inconsistency in Byte Addressable Persistent B+-Tree</a></li><li class=file><a href=https://minuk.dev/wiki/ssd-%EA%B3%B5%EB%B6%80%EC%9E%90%EB%A3%8C-%EB%AA%A8%EC%9D%8C/ title=./wiki/ssd-%EA%B3%B5%EB%B6%80%EC%9E%90%EB%A3%8C-%EB%AA%A8%EC%9D%8C/>SSD 공부 자료 모음</a></li><li class=file><a href=https://minuk.dev/wiki/%EA%B0%9C%EB%B0%9C_todo/ title=./wiki/%EA%B0%9C%EB%B0%9C_todo/>개발 TODO</a></li><li class=file><a href=https://minuk.dev/wiki/f2fs/ title=./wiki/f2fs/>F2FS</a></li><li class=file><a href=https://minuk.dev/wiki/%EC%84%A4%EB%8C%80%ED%9A%8C/ title=./wiki/%EC%84%A4%EB%8C%80%ED%9A%8C/>설대회</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-01-01/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-01-01/>회고/2020-01-01</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-01-17/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-01-17/>회고/2020-01-17</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2019-11-24/ title=./wiki/%ED%9A%8C%EA%B3%A0/2019-11-24/>회고/2019.11.24</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2019-10-19/ title=./wiki/%ED%9A%8C%EA%B3%A0/2019-10-19/>회고/2019.10.19</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2019-09-19/ title=./wiki/%ED%9A%8C%EA%B3%A0/2019-09-19/>회고/2019.09.19</a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2019-09-18/ title=./wiki/%ED%9A%8C%EA%B3%A0/2019-09-18/>회고/2019.09.18</a></li><li class=file><a href=https://minuk.dev/wiki/2024-12-23/ title=./wiki/2024-12-23/></a></li><li class=file><a href=https://minuk.dev/wiki/2025-01-05/ title=./wiki/2025-01-05/></a></li><li class=file><a href=https://minuk.dev/wiki/daily/2025-01-10/ title=./wiki/daily/2025-01-10/></a></li><li class=file><a href=https://minuk.dev/wiki/daily/drawing-2025-01-05-06.04.41.excalidraw/ title=./wiki/daily/drawing-2025-01-05-06.04.41.excalidraw/></a></li><li class=file><a href=https://minuk.dev/wiki/daily/drawing-2025-01-05-06.04.49.excalidraw/ title=./wiki/daily/drawing-2025-01-05-06.04.49.excalidraw/></a></li><li class=file><a href=https://minuk.dev/wiki/daily/drawing-2025-01-05-06.04.59.excalidraw/ title=./wiki/daily/drawing-2025-01-05-06.04.59.excalidraw/></a></li><li class=file><a href=https://minuk.dev/wiki/drawings/drawing-2025-01-05-05.12.23.excalidraw/ title=./wiki/drawings/drawing-2025-01-05-05.12.23.excalidraw/></a></li><li class=file><a href=https://minuk.dev/wiki/drawings/drawing-2025-01-05-05.54.32.excalidraw/ title=./wiki/drawings/drawing-2025-01-05-05.54.32.excalidraw/></a></li><li class=file><a href=https://minuk.dev/wiki/excalidraw/test-draw/ title=./wiki/excalidraw/test-draw/></a></li><li class=file><a href=https://minuk.dev/wiki/ipad/ title=./wiki/ipad/></a></li><li class=file><a href=https://minuk.dev/wiki/jekyll-%EA%B8%B0%EB%B0%98-wiki-%EC%97%90%EC%84%9C-hugo-%EB%A1%9C-%EB%84%98%EC%96%B4%EA%B0%80%EA%B8%B0/ title=./wiki/jekyll-%EA%B8%B0%EB%B0%98-wiki-%EC%97%90%EC%84%9C-hugo-%EB%A1%9C-%EB%84%98%EC%96%B4%EA%B0%80%EA%B8%B0/></a></li><li class=file><a href=https://minuk.dev/wiki/lectures/compiler/ title=./wiki/lectures/compiler/></a></li><li class=file><a href=https://minuk.dev/wiki/lectures/signal_and_system/ title=./wiki/lectures/signal_and_system/></a></li><li class=file><a href=https://minuk.dev/wiki/macos-initialization/ title=./wiki/macos-initialization/></a></li><li class=file><a href=https://minuk.dev/wiki/modern-c++-design-pattern/chapter-3--%ED%8C%A9%ED%86%A0%EB%A6%AC/ title=./wiki/modern-c++-design-pattern/chapter-3--%ED%8C%A9%ED%86%A0%EB%A6%AC/></a></li><li class=file><a href=https://minuk.dev/wiki/test.excalidraw/ title=./wiki/test.excalidraw/></a></li><li class=file><a href=https://minuk.dev/wiki/test/ title=./wiki/test/></a></li><li class=file><a href=https://minuk.dev/wiki/ucpc_2018_%EC%98%88%EC%84%A0/ title=./wiki/ucpc_2018_%EC%98%88%EC%84%A0/></a></li><li class=file><a href=https://minuk.dev/wiki/%EB%8D%B0%EC%A4%91%EC%96%B4%EC%84%A4/ title=./wiki/%EB%8D%B0%EC%A4%91%EC%96%B4%EC%84%A4/></a></li><li class=file><a href=https://minuk.dev/wiki/%EC%9D%98%EA%B2%AC-%EB%A9%94%EB%AA%A8/ title=./wiki/%EC%9D%98%EA%B2%AC-%EB%A9%94%EB%AA%A8/></a></li><li class=file><a href=https://minuk.dev/wiki/%EC%A3%BC%EC%9E%A5-%EB%A9%94%EB%AA%A8/ title=./wiki/%EC%A3%BC%EC%9E%A5-%EB%A9%94%EB%AA%A8/></a></li><li class=file><a href=https://minuk.dev/wiki/%ED%82%A4%EC%9B%8C%EB%93%9C-%EB%A9%94%EB%AA%A8/ title=./wiki/%ED%82%A4%EC%9B%8C%EB%93%9C-%EB%A9%94%EB%AA%A8/></a></li><li class=file><a href=https://minuk.dev/wiki/%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9A%A9/ title=./wiki/%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9A%A9/></a></li><li class=file><a href=https://minuk.dev/wiki/%ED%9A%8C%EA%B3%A0/2020-05-30/ title=./wiki/%ED%9A%8C%EA%B3%A0/2020-05-30/></a></li><li class=file><a href=https://minuk.dev/wiki/tags/ title=./wiki/tags/>tag page</a></li></ul></li><li class=file><a href=https://minuk.dev/about/ title=./about/>about</a></li></ul></aside><aside class=exapandable></aside><article class=main><button class=sidebar-toggle-btn type=menu aria-expanded=false aria-haspopup=true>
<i class="bi bi-list"></i></button><div class=title><h1 class=title-header>linux-debug/timer</h1></div><a href=https://github.com/minuk-dev/minuk-dev.github.io/blame/master/src/content/wiki/linux-debug/timer.md><h5>created : Tue, 10 Nov 2020 23:57:38 +0900</h5><h5>modified : Wed, 09 Dec 2020 13:31:16 +0900</h5></a><div class=article-meta><div class="breadcumb content"><i class="bi bi-folder"></i>
Front Page
[[debug-linux]]</div></div><div class=list-terms><ul><i class="bi bi-tags" title=Tags></i>
<a href=/tags/linux-debug class=tag-btn>linux-debug</a>
<a href=/tags/timer class=tag-btn>timer</a></ul></div><aside class=navbar id=nav-toc style=text-align:left><nav id=TableOfContents><ul><li><ul><li><a href=#커널-타이머-관리>커널 타이머 관리</a></li></ul></li></ul></nav></aside><div class=content><h3 id=커널-타이머-관리>커널 타이머 관리</h3><ul><li>주요 개념<ul><li>HZ와 jiffies</li><li>Soft IRQ 서비스</li><li>커널 타이버를 이루는 자료구조</li><li>동적 타이머</li></ul></li><li>HZ : 1초에 jiffies가 업데이트되는 횟수</li><li>Soft IRQ의 타이머 서비스<ol><li>타이머 인터럽트가 발생하면 TIMER_SOFTIRQ라는 Soft IRQ 서비스를 요청합니다.</li><li>Soft IRQ 서비스 루틴에서 TIMER_SOFTIRQ 서비스의 아이디 핸들러인 run_timer_softirq() 함수를 호출한다.</li><li>run_timer_softirq() 함수에서는 time_bases라는 전역변수에 등록된 동적 타이머를 처리합니다.</li></ol></li><li>이외의 시간을 처리하는 기법<ul><li>SoC(Sytem on chip)에서 제공하는 틱 디바이스, timekeeping, 고해상도 타이머(High Resolution Timer)</li></ul></li></ul><h4 id=jiffies>jiffies</h4><ul><li><p>HZ가 너무 크면 시스템에 오버헤드, 너무 작으면 동적 타이머의 오차가 커짐.</p></li><li><p><code>out/.config</code> 에서 <code>CONFIG_HZ=100</code> 같은 구문에서 확인 가능하다.</p></li><li><p>jiffies로 시간 흐름을 제어하는 코드 분석</p><ul><li>mod_timer()</li></ul><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20timer_list%20dynamic_timer%0aint%20timeout%20=%200;%0atimeout%20=%20jiffies;%0atimeout%20+=%202%20*%20HZ;%0a%0amod_timer%28&amp;dynamic_timer,%20timeout%29;">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> timer_list dynamic_timer
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> timeout <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>timeout <span style=color:#f92672>=</span> jiffies;
</span></span><span style=display:flex><span>timeout <span style=color:#f92672>+=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> HZ;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>mod_timer</span>(<span style=color:#f92672>&amp;</span>dynamic_timer, timeout);</span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=extern%20int%20mod_timer%28struct%20timer_list%20*timer,%20unsigned%20long%20expires%29;>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>mod_timer</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer, <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> expires);</span></span></code></pre></div></div></li><li><p>jffieis 와 jiffies_64 변수</p><ul><li>System.map 파일<div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=80c03d00%20D%20jiffies%0a80c03d00%20D%20jiffies_64>
<i class="bi bi-copy"></i></button></div><pre><code>80c03d00 D jiffies
80c03d00 D jiffies_64</code></pre></div></li></ul></li><li><p>do_timer</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="void%20do_timer%28unsigned%20long%20ticks%29%0a%7b%0a%20%20jiffies_64%20+=%20ticks;%0a%20%20calc_global_load%28ticks%29;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>do_timer</span>(<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> ticks)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  jiffies_64 <span style=color:#f92672>+=</span> ticks;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>calc_global_load</span>(ticks);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20void%20tick_do_update_jiffies64%28ktime_t%20now%29%0a%7b%0a/*%20skip%20*/%0a%20%20if%20%28delta%20%3e=%20tick_period%29%20%7b%0a%20%20%20%20delta%20=%20ktime_sub%28delta,%20tick_period%29;%0a%20%20%20%20last_jiffies_update%20=%20ktime_add%28last_jiffies_update,%0a%20%20%20%20/*%20skip%20*/%0a%20%20%20%20do_timer%28++ticks%29;%0a/*%20skip%20*/">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>tick_do_update_jiffies64</span>(<span style=color:#66d9ef>ktime_t</span> now)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (delta <span style=color:#f92672>&gt;=</span> tick_period) {
</span></span><span style=display:flex><span>    delta <span style=color:#f92672>=</span> <span style=color:#a6e22e>ktime_sub</span>(delta, tick_period);
</span></span><span style=display:flex><span>    last_jiffies_update <span style=color:#f92672>=</span> <span style=color:#a6e22e>ktime_add</span>(last_jiffies_update,
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>do_timer</span>(<span style=color:#f92672>++</span>ticks);
</span></span><span style=display:flex><span><span style=color:#75715e>/* skip */</span></span></span></code></pre></div></div></li><li><p>msecs_to_jiffies()</p><ul><li><p>밀리초를 입력으로 받아 jiffies 단위 시각 정보를 반환</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=static%20__always_inline%20unsigned%20long%20msecs_to_jiffies%28const%20unsigned%20int%20m%29;>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> __always_inline <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>msecs_to_jiffies</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> m);</span></span></code></pre></div></div></li><li><p>사용 예제</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=msecs_to_jiffies%28ms%29;>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#a6e22e>msecs_to_jiffies</span>(ms);</span></span></code></pre></div></div></li><li><p>구현부</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=static%20__always_inline%20unsigned%20long%20msecs_to_jiffies%28cosnt%20unsigned%20int%20m%29%0a%7b%0a%20%20if%20%28__builtin_constant_p%28m%29%29%20%7b%0a%20%20%20%20if%20%28%28int%29m%20%3c%200%29%0a%20%20%20%20%20%20return%20MAX_JIFFY_OFFSET;%0a%20%20%20%20return%20_msecs_to_jiffies%28m%29;%0a%20%20%7d%20else%20%7b%0a%20%20%20%20return%20__msecs_to_jiffies%28m%29;%0a%20%20%7d%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> __always_inline <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>msecs_to_jiffies</span>(cosnt <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> m)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>__builtin_constant_p</span>(m)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> ((<span style=color:#66d9ef>int</span>)m <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> MAX_JIFFY_OFFSET;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>_msecs_to_jiffies</span>(m);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>__msecs_to_jiffies</span>(m);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#define%20MAX_JIFFY_OFFSET%20%28%28LONG_MAX%20%3e%3e%201%29-1%29%0a#define%20LONG_MAX%20%28%28long%29%28~0UL%3e%3e1%29%29>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#define MAX_JIFFY_OFFSET ((LONG_MAX &gt;&gt; 1)-1)
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define LONG_MAX ((long)(~0UL&gt;&gt;1))</span></span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=static%20inline%20unsigned%20long%20_msecs_to_jiffies%28const%20unsigned%20int%20m%29%0a%7b%0a%20%20return%20%28m%20+%20%28MSEC_PER_SEC%20/%20HZ%29%20-%201%29%20/%20%28MSEC_PER_SEC%20/%20HZ%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>_msecs_to_jiffies</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> m)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (m <span style=color:#f92672>+</span> (MSEC_PER_SEC <span style=color:#f92672>/</span> HZ) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>/</span> (MSEC_PER_SEC <span style=color:#f92672>/</span> HZ);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li></ul></li><li><p>time_after(), time_before()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#define%20time_after%28a,b%29%20%20%20%20%5c%0a%20%20%28typecheck%28unsigned%20long,%20a%29%20&&%20%5c%0a%20%20typecheck%28unsigned%20long,%20b%29%20&&%20%5c%0a%20%20%28%28long%29%28%28b%29%20-%20%28a%29%29%20%3c%200%29%29%0a#define%20time_before%28a,b%29%20time_after%28b,a%29>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#define time_after(a,b)    \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  (typecheck(unsigned long, a) &amp;&amp; \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  typecheck(unsigned long, b) &amp;&amp; \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  ((long)((b) - (a)) &lt; 0))
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define time_before(a,b) time_after(b,a)</span></span></span></code></pre></div></div></li></ul><h4 id=동적-타이머-초기화>동적 타이머 초기화</h4><ul><li><p>기본 흐름</p><ol><li>동적 타이머 초기화 : 동적 타이머 초기화는 보통 드라이 버레벨에서 수행한다. 동적 타이머를 나타내는 timer_list 구조체의 필드 중에서 flags와 function만 바뀐다.</li><li>동적 타이머 등록 : 동적 타이머도 마찬가지로 드라이버 레벨에서 등록된다. 각 드라이버의 시나리오에 따라 동적 타이머의 만료 시간을 1/HZ 단위로 지정한 다음 add_timer() 함수를 호출한다.</li><li>동적 타이머 실행 : 동적 타이머가 지정한 만료 시각이 되면 Soft IRQ 타이머 서비스가 동적 타이머를 실행한다.</li></ol></li><li><p>동적 타이머 자료구조</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=struct%20timer_list%20%7b%0a%20%20struct%20hlist_node%20%20%20%20entry;%0a%20%20unsigned%20long%20%20%20%20%20%20%20%20expries;%0a%20%20void%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28*function%29%28struct%20timer_list%20*%29;%0a%20%20u32%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20flags;%0a%0a#ifdef%20CONFIG_LOCKDEP%0a%20%20struct%20lockdep_map%20%20%20lockdep_map;%0a#endif%0a%7d;>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>struct</span> timer_list {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> hlist_node    entry;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span>        expries;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>void</span>                 (<span style=color:#f92672>*</span>function)(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>);
</span></span><span style=display:flex><span>  u32                  flags;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#ifdef CONFIG_LOCKDEP
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>struct</span> lockdep_map   lockdep_map;
</span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>};</span></span></code></pre></div></div><ul><li>entry : 해시 연결리스트, timer_bases 전역변수 에동적 타이머를 등록할 때 쓰인다.</li><li>expires : 동적 타이머 만료시각을 나타낸다. 이 시각에 커널 타이머가 동적 타이머의 핸들러 함수를 호출한다. 이때 단위는 1/HZ</li><li>function : 동적 타이머 핸들러 함수의 주소를 저장하는 필드. call_tiemr_fn() 함수에 서이 필드에 접근해 동적 타이머 핸들러를 호출한다.</li><li>flags : 동적 타이머의 설정 필드이며 다음 값 중 하나로 설정된다.<div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#define%20TIMER_CPUMASK%20%20%20%20%20%200x0003FFFF%0a#define%20TIMER_MIGRATING%20%20%20%200x00040000%0a#define%20TIMER_BASEMASK%20%20%20%20%20%28TIMER_CPUMASK%20%7c%20TIMER_MIGRATING%29%0a#define%20TIMER_DEFERRABLE%20%20%200x00080000%0a#define%20TIMER_PINNED%20%20%20%20%20%20%200x00100000%0a#define%20TIMER_IRQSAFE%20%20%20%20%20%200x00200000%0a#define%20TIMER_ARRAYSHIFT%20%20%2022%0a#define%20TIMER_ARRAYMASK%20%20%20%200xFFC00000>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#define TIMER_CPUMASK      0x0003FFFF
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TIMER_MIGRATING    0x00040000
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TIMER_BASEMASK     (TIMER_CPUMASK | TIMER_MIGRATING)
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TIMER_DEFERRABLE   0x00080000
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TIMER_PINNED       0x00100000
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TIMER_IRQSAFE      0x00200000
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TIMER_ARRAYSHIFT   22
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define TIMER_ARRAYMASK    0xFFC00000</span></span></span></code></pre></div></div></li></ul></li><li><p>동적 타이머 초기화 함수</p><ul><li><p>timer_setup()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=void%20timer_setup%28struct%20timer_list%20*timer,%20void%20*func,%20unsigned%20int%20flags%29;>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>timer_setup</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer, <span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>func, <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> flags);</span></span></code></pre></div></div><ul><li>timer : 동적 타이머를 나타내는 정보</li><li>func : 동적 타이머 핸들러 함수</li><li>flags : 동적 타이머 플레그</li><li>커널 4.14 버전까지 동적 타이머를 초기화하려면 setup_timer() 함수나 init_timer() 함수를 써야됬다.</li></ul><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#define%20timer_setup%28timer,%20callback,%20flags%29%20%20%20%20%20%20%20%5c%0a%20%20%20%20__init_timer%28%28timer%29,%20%28callback%29,%20%28flags%29%29%0a%0a#define%20__init_timer%28_timer,%20_fn,%20_flags%29%20%5c%0a%20%20init_timer_key%28%28_timer%29,%20%28_fn%29,%20%28_flags%29,%20NULL,%20NULL%29>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#define timer_setup(timer, callback, flags)       \
</span></span></span><span style=display:flex><span><span style=color:#75715e>    __init_timer((timer), (callback), (flags))
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#define __init_timer(_timer, _fn, _flags) \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  init_timer_key((_timer), (_fn), (_flags), NULL, NULL)</span></span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=void%20init_timer_key%28struct%20timer_list%20*timer,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20%28*func%29%28struct%20timer_list%20*%29,%20unsigned%20int%20flags,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20char%20*name,%20struct%20lock_class_key%20*key%29%0a%7b%0a%20%20debug_init%28timer%29;%0a%20%20do_init_timer%28timer,%20func,%20flags,%20name,%20key%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init_timer_key</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer,
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>void</span> (<span style=color:#f92672>*</span>func)(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>), <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> flags,
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>name, <span style=color:#66d9ef>struct</span> lock_class_key <span style=color:#f92672>*</span>key)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>debug_init</span>(timer);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>do_init_timer</span>(timer, func, flags, name, key);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=static%20inline%20void%20debug_init%28struct%20timer_list%20*timer%29%0a%7b%0a%20%20debug_timer_init%28timer%29;%0a%20%20trace_timer_init%28timer%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>debug_init</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>debug_timer_init</span>(timer);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>trace_timer_init</span>(timer);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20void%20do_init_timer%28struct%20timer_list%20*timer,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20%28*func%29%28struct%20timer_list%20*%29,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unsigned%20int%20flags,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20char%20*name,%20struct%20lock_class_key%20*key%29%0a%7b%0a%20%20timer-%3eentry.pprev%20=%20NULL;%0a%20%20timer-%3efunction%20=%20func;%0a%20%20timer-%3eflags%20=%20flags%20%7c%20raw_smp_processor_id%28%29;%0a%20%20lockdep_init_map%28&amp;timer-%3elockdep_map,%20name,%20key,%200%29;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>do_init_timer</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer,
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>void</span> (<span style=color:#f92672>*</span>func)(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>),
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> flags,
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>name, <span style=color:#66d9ef>struct</span> lock_class_key <span style=color:#f92672>*</span>key)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  timer<span style=color:#f92672>-&gt;</span>entry.pprev <span style=color:#f92672>=</span> NULL;
</span></span><span style=display:flex><span>  timer<span style=color:#f92672>-&gt;</span>function <span style=color:#f92672>=</span> func;
</span></span><span style=display:flex><span>  timer<span style=color:#f92672>-&gt;</span>flags <span style=color:#f92672>=</span> flags <span style=color:#f92672>|</span> <span style=color:#a6e22e>raw_smp_processor_id</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lockdep_init_map</span>(<span style=color:#f92672>&amp;</span>timer<span style=color:#f92672>-&gt;</span>lockdep_map, name, key, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li></ul></li></ul><h4 id=동적타이머-등록>동적타이머 등록</h4><ul><li><p>동적 타이머 등록 함수</p><ul><li><p>add_timer : 동적타이머를 등록하기 위한 인터페이스</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=void%20add_timer%28struct%20timer_list%20*timer%29%0a%7b%0a%20%20BUG_ON%28timer_pending%28timer%29%29;%0a%20%20mod_timer%28timer,%20timer-%3eexpires%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add_timer</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>BUG_ON</span>(<span style=color:#a6e22e>timer_pending</span>(timer));
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mod_timer</span>(timer, timer<span style=color:#f92672>-&gt;</span>expires);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>mod_timer</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=int%20mod_timer%28struct%20timer_list%20*timer,%20unsigned%20long%20expires%29%0a%7b%0a%20%20return%20__mod_timer%28timer,%20expires,%20false%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>mod_timer</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer, <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> expires)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>__mod_timer</span>(timer, expires, false);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>__mod_timer : 실제로 동적타이머를 등록하는 함수</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20inline%20int%0a__mod_timer%28struct%20timer_list%20*timer,%20unsigned%20long%20expires,%20unsigned%20int%20options%29%0a%7b%0a%20%20struct%20timer_base%20*base,%20*new_base;%0a%20%20unsigned%20int%20idx%20=%20UINT_MAX;%0a%20%20unsigned%20long%20clk%20=%200,%20flags;%0a%20%20int%20ret%20=%200;%0a%0a%20%20BUG_ON%28!timer-%3efunction%29;%0a%0a%20%20if%20%28timer_pending%28timer%29%29%20%7b%0a%20%20%20%20long%20diff%20=%20timer-%3eexpires%20-%20expires;%0a%0a%20%20%20%20if%20%28!diff%29%0a%20%20%20%20%20%20return%201;%0a%20%20%20%20if%20%28options%20&%20MOD_TIMER_REDUCE%20&&%20diff%20%3c=%200%29%0a%20%20%20%20%20%20return%201;%0a%20%20%20%20base%20=%20lock_timer_base%28timer,%20&amp;flgas%29;%0a%20%20%20%20forward_timer_base%28base%29;%0a%0a%20%20%20%20if%20%28timer_pending%28timer%29%20&&%20%28options%20&%20MOD_TIMER_REDUCE%29%20&&%0a%20%20%20%20%20%20time_before_eq%28timer-%3eexpires,%20expires%29%29%20%7b%0a%20%20%20%20%20%20return%20=%201;%0a%20%20%20%20%20%20goto%20out_unlock;%0a%20%20%20%20%7d%0a%0a%20%20%20%20clk%20=%20base-%3eclk;%0a%20%20%20%20idx%20=%20calc_wheel_index%28expires,%20clk%29;%0a%20%20%20%20/*%20skip%20*/%0a%20%20%7d%20else%20%7b%0a%20%20%20%20base%20=%20lock_timer_base%28timer,%20&amp;flags%29;%0a%20%20%20%20forward_timer_base%28base%29;%0a%20%20%7d%0a%0a%20%20ret%20=%20detach_if_pending%28timer,%20base,%20false%29;%0a%20%20/*%20skip%20*/%0a%20%20debug_active%28timer,%20expires%29;%0a%0a%20%20timer-%3eexpires%20=%20expires;%0a%0a%20%20if%20%28idx%20!=%20UINT_MAX%20&&%20clk%20==%20base-%3eclk%29%20%7b%0a%20%20%20%20enqueue_timer%28base,%20timer,%20idx%29;%0a%20%20%20%20trigger_dyntick_cpu%28base,%20timer%29;%0a%20%20%7d%20else%20%7b%0a%20%20%20%20internal_add_timer%28base,%20timer%29;%0a%20%20%7d%0a%0aout_unlock:%0a%20%20raw_spin_unlock_irqrestore%28&amp;base-%3elock,%20flags%29;%0a%0a%20%20return%20ret;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>__mod_timer</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer, <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> expires, <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> options)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base, <span style=color:#f92672>*</span>new_base;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> idx <span style=color:#f92672>=</span> UINT_MAX;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> clk <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, flags;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> ret <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>BUG_ON</span>(<span style=color:#f92672>!</span>timer<span style=color:#f92672>-&gt;</span>function);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>timer_pending</span>(timer)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>long</span> diff <span style=color:#f92672>=</span> timer<span style=color:#f92672>-&gt;</span>expires <span style=color:#f92672>-</span> expires;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>diff)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (options <span style=color:#f92672>&amp;</span> MOD_TIMER_REDUCE <span style=color:#f92672>&amp;&amp;</span> diff <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>    base <span style=color:#f92672>=</span> <span style=color:#a6e22e>lock_timer_base</span>(timer, <span style=color:#f92672>&amp;</span>flgas);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>forward_timer_base</span>(base);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>timer_pending</span>(timer) <span style=color:#f92672>&amp;&amp;</span> (options <span style=color:#f92672>&amp;</span> MOD_TIMER_REDUCE) <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>time_before_eq</span>(timer<span style=color:#f92672>-&gt;</span>expires, expires)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>goto</span> out_unlock;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    clk <span style=color:#f92672>=</span> base<span style=color:#f92672>-&gt;</span>clk;
</span></span><span style=display:flex><span>    idx <span style=color:#f92672>=</span> <span style=color:#a6e22e>calc_wheel_index</span>(expires, clk);
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    base <span style=color:#f92672>=</span> <span style=color:#a6e22e>lock_timer_base</span>(timer, <span style=color:#f92672>&amp;</span>flags);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>forward_timer_base</span>(base);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ret <span style=color:#f92672>=</span> <span style=color:#a6e22e>detach_if_pending</span>(timer, base, false);
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>debug_active</span>(timer, expires);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  timer<span style=color:#f92672>-&gt;</span>expires <span style=color:#f92672>=</span> expires;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (idx <span style=color:#f92672>!=</span> UINT_MAX <span style=color:#f92672>&amp;&amp;</span> clk <span style=color:#f92672>==</span> base<span style=color:#f92672>-&gt;</span>clk) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>enqueue_timer</span>(base, timer, idx);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>trigger_dyntick_cpu</span>(base, timer);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>internal_add_timer</span>(base, timer);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>out_unlock:
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raw_spin_unlock_irqrestore</span>(<span style=color:#f92672>&amp;</span>base<span style=color:#f92672>-&gt;</span>lock, flags);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> ret;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><ul><li>반복해서 동적 타이머를 등록하면 1을 반환하며 실행을 종료</li><li>동적 타이머는 timer_base 타이머 해시 벡터에 등록함</li></ul></li></ul></li><li><p>timer_pending() : 동적 타이머가 등록됬는지 확인하는 함수</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20inline%20int%20timer_pending%28const%20struct%20timer_list%20*%20timer%29%0a%7b%0a%20%20return%20timer-%3eentry.pprev%20!=%20NULL;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>timer_pending</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span> timer)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> timer<span style=color:#f92672>-&gt;</span>entry.pprev <span style=color:#f92672>!=</span> NULL;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><ul><li>이미 동적 타이머를 등록했을 때 1을 반환</li><li>timer->entry.pprev 포인터는 percpu 타입의 timer_base 변수의 벡터 해시 테이블의 주소를 가리킨다.</li></ul></li><li><p>lock_timer_base()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20struct%20timer_base%20*lock_timer_base%28struct%20timer_list%20*timer,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unsigned%20long%20*flags%29%0a%20%20%20%20__acquires%28timer-%3ebase-%3elock%29%0a%7b%0a%20%20for%20%28;;%29%20%7b%0a%20%20%20%20/*%20skip%20*/%0a%20%20%20%20if%20%28!%28tf%20&%20TIMER_MIGRATING%29%29%20%7b%0a%20%20%20%20%20%20base%20=%20get_timer_base%28tf%29;%0a%20%20%20%20%20%20/*%20skip%20*/">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span><span style=color:#a6e22e>lock_timer_base</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer,
</span></span><span style=display:flex><span>                                      <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> <span style=color:#f92672>*</span>flags)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>__acquires</span>(timer<span style=color:#f92672>-&gt;</span>base<span style=color:#f92672>-&gt;</span>lock)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (;;) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>(tf <span style=color:#f92672>&amp;</span> TIMER_MIGRATING)) {
</span></span><span style=display:flex><span>      base <span style=color:#f92672>=</span> <span style=color:#a6e22e>get_timer_base</span>(tf);
</span></span><span style=display:flex><span>      <span style=color:#75715e>/* skip */</span></span></span></code></pre></div></div></li><li><p>get_timer_base() : 타이머가 기준으로 하는 timer_bases 전역변수를 읽는다.</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=static%20inline%20struct%20timer_base%20*get_timer_base%28u32%20tflags%29%0a%7b%0a%20%20return%20get_timer_cpu_base%28tflags,%20tflags%20&%20TIMER_CPUMASK%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span><span style=color:#a6e22e>get_timer_base</span>(u32 tflags)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>get_timer_cpu_base</span>(tflags, tflags <span style=color:#f92672>&amp;</span> TIMER_CPUMASK);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>get_timer_cpu_base()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20inline%20struct%20timer_base%20*get_timer_cpu_base%28u32%20flags,%20u32%20cpu%29%0a%7b%0a%20%20struct%20timer_base%20*base%20=%20per_cpu_ptr%28&amp;timer_bases[BASE_STD],%20cpu%29;%0a%20%20/*%20skip%20*/%0a%20%20return%20base;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span><span style=color:#a6e22e>get_timer_cpu_base</span>(u32 flags, u32 cpu)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base <span style=color:#f92672>=</span> <span style=color:#a6e22e>per_cpu_ptr</span>(<span style=color:#f92672>&amp;</span>timer_bases[BASE_STD], cpu);
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> base;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>forward_timer_base() : timer_base의 clk 필드를 현재 시각으로 바꾼다.</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20inline%20void%20forward_timer_base%28struct%20timer_base%20*base%29%0a%7b%0a#ifdef%20CONFIG_NO_HZ_COMMON%0a%20%20unsigned%20long%20jnow;%0a%20%20/*%20skip%20*/%0a%20%20jnow%20=%20READ_ONCE%28jiffies%29;%0a%20%20/*%20skip%20*/%0a%20%20if%20%28time_after%28base-%3enext_expiry,%20jnow%29%29%0a%20%20%20%20back-%3eclk%20=%20jnow;%0a%20%20else%0a%20%20%20%20base-%3eclk%20=%20base-%3enext_expiry;%0a#endif%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>forward_timer_base</span>(<span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#75715e>#ifdef CONFIG_NO_HZ_COMMON
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> jnow;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  jnow <span style=color:#f92672>=</span> <span style=color:#a6e22e>READ_ONCE</span>(jiffies);
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>time_after</span>(base<span style=color:#f92672>-&gt;</span>next_expiry, jnow))
</span></span><span style=display:flex><span>    back<span style=color:#f92672>-&gt;</span>clk <span style=color:#f92672>=</span> jnow;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    base<span style=color:#f92672>-&gt;</span>clk <span style=color:#f92672>=</span> base<span style=color:#f92672>-&gt;</span>next_expiry;
</span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></div></div></li><li><p>enqueue_timer()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=static%20void%20enqueue_timer%28struct%20timer_bae%20*base,%20struct%20timer_list%20*timer,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unsigned%20int%20idx%29%0a%7b%0a%20%20hlist_add_head%28&amp;timer-%3eentry,%20base-%3evectors%20+%20idx%29;%0a%20%20__set_bit%28idx,%20base-%3epending_map%29;%0a%20%20timer_set_idx%28timer,%20idx%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>enqueue_timer</span>(<span style=color:#66d9ef>struct</span> timer_bae <span style=color:#f92672>*</span>base, <span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer,
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> idx)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hlist_add_head</span>(<span style=color:#f92672>&amp;</span>timer<span style=color:#f92672>-&gt;</span>entry, base<span style=color:#f92672>-&gt;</span>vectors <span style=color:#f92672>+</span> idx);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>__set_bit</span>(idx, base<span style=color:#f92672>-&gt;</span>pending_map);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>timer_set_idx</span>(timer, idx);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><ul><li>base : percpu 타입의 timer_bases 전역변수에서 현재 구동중인 CPU에 해당하는 오프셋을 적용한 주소</li><li>timer : 등록하려는 동적 타이머의 속성 정보</li></ul></li></ul><h4 id=동적타이머-실행>동적타이머 실행</h4><ol><li>TIMER_SOFTIRQ 아이디로 Soft IRQ 서비스 요청</li><li>Soft IRQ 컨텍스트 시작</li><li>Soft IRQ 서비스 요청 점검</li><li>등록된 동적 타이머 실행</li></ol><ul><li><p>update_process_times()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="void%20update_process_times%28int%20user_tick%29%0a%7b%0a%20%20struct%20task_struct%20*p%20=%20current;%0a%0a%20%20account_process_tick%28p,%20user_tick%29;%0a%20%20run_local_timers%28%29;%0a%20%20/*%20skip%20*/%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>update_process_times</span>(<span style=color:#66d9ef>int</span> user_tick)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> task_struct <span style=color:#f92672>*</span>p <span style=color:#f92672>=</span> current;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>account_process_tick</span>(p, user_tick);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>run_local_timers</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>run_local_timers()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="void%20run_local_timers%28void%29%0a%7b%0a%20%20struct%20timer_base%20*base%20=%20this_cpu_ptr%28&amp;timer_bases[BASE_STD]%29;%0a%0a%20%20hrtimer_run_queues%28%29;%0a%0a%20%20if%20%28time_before%28jiffies,%20base-%3eclk%29%29%20%7b%0a%20%20%20%20if%20%28!IS_ENABLED%28CONFIG_NO_HZ_COMMON%29%29%0a%20%20%20%20%20%20return;%0a%20%20%20%20/*%20CPU%20is%20awake,%20so%20check%20the%20deferrable%20base.%20*/%0a%20%20%20%20base++;%0a%20%20%20%20if%20%28timer_before%28jiffies,%20base-%3eclk%29%29%0a%20%20%20%20%20%20return;%0a%20%20%7d%0a%20%20raise_softirq%28TIMER_SOFTIRQ%29;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run_local_timers</span>(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base <span style=color:#f92672>=</span> <span style=color:#a6e22e>this_cpu_ptr</span>(<span style=color:#f92672>&amp;</span>timer_bases[BASE_STD]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hrtimer_run_queues</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>time_before</span>(jiffies, base<span style=color:#f92672>-&gt;</span>clk)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>IS_ENABLED</span>(CONFIG_NO_HZ_COMMON))
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* CPU is awake, so check the deferrable base. */</span>
</span></span><span style=display:flex><span>    base<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>timer_before</span>(jiffies, base<span style=color:#f92672>-&gt;</span>clk))
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raise_softirq</span>(TIMER_SOFTIRQ);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><ul><li>지연 타이머는 deferrable 전용 타이머 베이스를 사용한다.</li><li>타이머 인터럽트가 발생 -> 만료될 동적 타이머가 있는지 점검 -> 있다면 TIMER_SOFTIRQ라는 서비스로 Soft IRQ 서비스 요청</li></ul></li><li><p>__do_softirq()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="asmlinkage%20__visible%20void%20__softirq_entry%28void%29%0a%7b%0a%20%20unsigned%20long%20end%20=%20jiffies%20+%20MAX_SOFTIRQ_TIME;%0a%20%20unsigned%20long%20old_flags%20=%20current-%3eflags;%0a%20%20struct%20softirq_action%20*h;%0a%20%20/*%20skip%20*/%0arestart:%0a%20%20set_softirq_pending%280%29;%0a%0a%20%20local_irq_enable%28%29;%0a%0a%20%20h%20=%20softirq_vec;%0a%20%20while%20%28%28softirq_bit%20=%20ffs%28pending%29%29%29%20%7b%0a%20%20%20%20unsigned%20int%20vec_nr;%0a%20%20%20%20int%20prev_count;%0a%0a%20%20%20%20h%20+=%20softirq_bit%20-%201;%0a%0a%20%20%20%20vec_nr%20=%20h%20-%20softirq_vec;%0a%20%20%20%20prev_count%20=%20preempt_count%28%29;%0a%0a%20%20%20%20kstat_incr_softirqs_this_cpu%28vec_nr%29;%0a%0a%20%20%20%20trace_softirq_entry%28vec_nr%29;%0a%20%20%20%20h-%3eaction%28h%29;%0a%20%20/*%20skip%20*/%0a%20%20%7d%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>asmlinkage __visible <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>__softirq_entry</span>(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> end <span style=color:#f92672>=</span> jiffies <span style=color:#f92672>+</span> MAX_SOFTIRQ_TIME;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> old_flags <span style=color:#f92672>=</span> current<span style=color:#f92672>-&gt;</span>flags;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> softirq_action <span style=color:#f92672>*</span>h;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>restart:
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>set_softirq_pending</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>local_irq_enable</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  h <span style=color:#f92672>=</span> softirq_vec;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> ((softirq_bit <span style=color:#f92672>=</span> <span style=color:#a6e22e>ffs</span>(pending))) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> vec_nr;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> prev_count;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    h <span style=color:#f92672>+=</span> softirq_bit <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    vec_nr <span style=color:#f92672>=</span> h <span style=color:#f92672>-</span> softirq_vec;
</span></span><span style=display:flex><span>    prev_count <span style=color:#f92672>=</span> <span style=color:#a6e22e>preempt_count</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>kstat_incr_softirqs_this_cpu</span>(vec_nr);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>trace_softirq_entry</span>(vec_nr);
</span></span><span style=display:flex><span>    h<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>action</span>(h);
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>run_timer_softirq()</p><ul><li>TIMER_SOFTIRQ 의 handler 는 run_timer_softirq 임</li></ul><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20__latent_entropy%20void%20run_timer_softirq%28struct%20softirq_action%20*h%29%0a%7b%0a%20%20struct%20timer_base%20*base%20=%20this_cpu_ptr%28&amp;timer_bases[BASE_STD]%29;%0a%20%20base-%3emust_forward_clk%20=%20false;%0a%0a%20%20__run_timers9base%29;%0a%20%20if%20%28IS_ENABLED%28CONFIG_NO_HZ_COMMON%29%29%0a%20%20%20%20__run_timers%28this_cpu_ptr%28&amp;timer_bases[BASE_DEF]%29%29;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> __latent_entropy <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run_timer_softirq</span>(<span style=color:#66d9ef>struct</span> softirq_action <span style=color:#f92672>*</span>h)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base <span style=color:#f92672>=</span> <span style=color:#a6e22e>this_cpu_ptr</span>(<span style=color:#f92672>&amp;</span>timer_bases[BASE_STD]);
</span></span><span style=display:flex><span>  base<span style=color:#f92672>-&gt;</span>must_forward_clk <span style=color:#f92672>=</span> false;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  __run_timers9base);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>IS_ENABLED</span>(CONFIG_NO_HZ_COMMON))
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>__run_timers</span>(<span style=color:#a6e22e>this_cpu_ptr</span>(<span style=color:#f92672>&amp;</span>timer_bases[BASE_DEF]));
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>__run_timers()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20inline%20void%20__run_timers%28struct%20timer_base%20*base%29%0a%7b%0a%20%20struct%20hlist_head%20heads[LVLDEPTH];%0a%20%20int%20levels;%0a%0a%20%20if%20%28!timer_after_eq%28jiffies,%20base-%3eclk%29%29%0a%20%20%20%20return;%0a%0a%20%20raw_spin_lock_irq%28&amp;base-%3elock%29;%0a%0a%20%20while%20%28time_after_eq%28jiffies,%20base-%3eclk%29%29%20%7b%0a%0a%20%20%20%20levels%20=%20collect_expired_timers%28base,%20heads%29;%0a%20%20%20%20base-%3eclk++;%0a%0a%20%20%20%20while%20%28levels--%29%0a%20%20%20%20%20%20expire_timers%28base,%20heads%20+%20levels%29;%0a%20%20%7d%0a%20%20base-%3erunning_timer%20=%20NULL;%0a%20%20raw_spin_unlock_irq%28&amp;base-%3elock%29;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>__run_timers</span>(<span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> hlist_head heads[LVLDEPTH];
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> levels;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>timer_after_eq</span>(jiffies, base<span style=color:#f92672>-&gt;</span>clk))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raw_spin_lock_irq</span>(<span style=color:#f92672>&amp;</span>base<span style=color:#f92672>-&gt;</span>lock);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>time_after_eq</span>(jiffies, base<span style=color:#f92672>-&gt;</span>clk)) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    levels <span style=color:#f92672>=</span> <span style=color:#a6e22e>collect_expired_timers</span>(base, heads);
</span></span><span style=display:flex><span>    base<span style=color:#f92672>-&gt;</span>clk<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> (levels<span style=color:#f92672>--</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>expire_timers</span>(base, heads <span style=color:#f92672>+</span> levels);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  base<span style=color:#f92672>-&gt;</span>running_timer <span style=color:#f92672>=</span> NULL;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>raw_spin_unlock_irq</span>(<span style=color:#f92672>&amp;</span>base<span style=color:#f92672>-&gt;</span>lock);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>__collect_expired_timers()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=static%20int%20collect_expired_timers%28struct%20timer_base%20*base,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20struct%20hlist_head%20*heads%29%0a%7b%0a/*%20skip%20*/%0a%20%20return%20__collect_expired_timers%28base,%20heads%29;%0a%7d>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>collect_expired_timers</span>(<span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base,
</span></span><span style=display:flex><span>                               <span style=color:#66d9ef>struct</span> hlist_head <span style=color:#f92672>*</span>heads)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span><span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>__collect_expired_timers</span>(base, heads);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20int%20__colect_expired_timers%28struct%20timer_base%20*base,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20struct%20hlist_head%20*heads%29%0a%7b%0a%20%20unsigned%20long%20clk%20=%20base-%3eclk;%0a%20%20struct%20hlist_head%20*vec;%0a%20%20int%20i,%20levels%20=%200;%0a%20%20unsigned%20int%20idx;%0a%0a%20%20for%20%28i%20=%200;%20i%20%3c%20LVL_DEPTH;%20i%20++%29%20%7b%0a%20%20%20%20idx%20=%20%28clk%20&%20LVL_MASK%29%20+%20i%20*%20LVL_SIZE;%0a%0a%20%20%20%20if%20%28__test_and_clear_bit%28idx,%20base-%3epending_map%29%29%20%7b%0a%20%20%20%20%20%20vec%20=%20base-%3evectors%20+%20idx;%0a%20%20%20%20%20%20hlist_move_list%28vec,%20heads++%29;%0a%20%20%20%20%20%20levels++;%0a%20%20%20%20%7d%0a%20%20%7d%0a%20%20/*%20skip%20*/%0a%20%20return%20levels;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>__colect_expired_timers</span>(<span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base,
</span></span><span style=display:flex><span>                               <span style=color:#66d9ef>struct</span> hlist_head <span style=color:#f92672>*</span>heads)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> clk <span style=color:#f92672>=</span> base<span style=color:#f92672>-&gt;</span>clk;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>struct</span> hlist_head <span style=color:#f92672>*</span>vec;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> i, levels <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>int</span> idx;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> LVL_DEPTH; i <span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    idx <span style=color:#f92672>=</span> (clk <span style=color:#f92672>&amp;</span> LVL_MASK) <span style=color:#f92672>+</span> i <span style=color:#f92672>*</span> LVL_SIZE;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>__test_and_clear_bit</span>(idx, base<span style=color:#f92672>-&gt;</span>pending_map)) {
</span></span><span style=display:flex><span>      vec <span style=color:#f92672>=</span> base<span style=color:#f92672>-&gt;</span>vectors <span style=color:#f92672>+</span> idx;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>hlist_move_list</span>(vec, heads<span style=color:#f92672>++</span>);
</span></span><span style=display:flex><span>      levels<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> levels;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li><li><p>expire_timers()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20void%20expire_timers%28struct%20timer_base%20*base,%20struct%20hlist_head%20*head%29%0a%7b%0a%20%20while%20%28!hlist_empty%28head%29%29%20%7b%0a%20%20%20%20struct%20timer_list%20*timer;%0a%20%20%20%20void%20%28*fn%29%28struct%20tiemr_list%20*%29;%0a%0a%20%20%20%20timer%20=%20hlist_entry%28head-%3efirst,%20struct%20timer_list,%20entry%29;%0a%0a%20%20%20%20base-%3erunning_timer%20=%20timer;%0a%20%20%20%20detach_timer%28timer,%20true%29;%0a%0a%20%20%20%20fn%20=%20timer-%3efunction;%0a%0a%20%20%20%20if%20%28timer-%3eflags%20&%20TIMER_IRQSAFE%29%20%7b%0a%20%20%20%20%20%20raw_spin_unlock%28&amp;base-%3elock%29;%0a%20%20%20%20%20%20call_timer_fn%28timer,%20fn%29;%0a%20%20%20%20%20%20raw_spin_lock%28&amp;base-%3elock%29;%0a%20%20%20%20%7d%20else%20%7b%0a%20%20%20%20%20%20raw_spin_unlock_irq%28&amp;base-%3elock%29;%0a%20%20%20%20%20%20call_timer_fn%28timer,%20fn%29;%0a%20%20%20%20%20%20raw_spin_lock_irq%28&amp;base-%3elock%29;%0a%20%20%20%20%7d%0a%20%20%7d%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>expire_timers</span>(<span style=color:#66d9ef>struct</span> timer_base <span style=color:#f92672>*</span>base, <span style=color:#66d9ef>struct</span> hlist_head <span style=color:#f92672>*</span>head)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>hlist_empty</span>(head)) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> (<span style=color:#f92672>*</span>fn)(<span style=color:#66d9ef>struct</span> tiemr_list <span style=color:#f92672>*</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    timer <span style=color:#f92672>=</span> <span style=color:#a6e22e>hlist_entry</span>(head<span style=color:#f92672>-&gt;</span>first, <span style=color:#66d9ef>struct</span> timer_list, entry);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    base<span style=color:#f92672>-&gt;</span>running_timer <span style=color:#f92672>=</span> timer;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>detach_timer</span>(timer, true);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fn <span style=color:#f92672>=</span> timer<span style=color:#f92672>-&gt;</span>function;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (timer<span style=color:#f92672>-&gt;</span>flags <span style=color:#f92672>&amp;</span> TIMER_IRQSAFE) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>raw_spin_unlock</span>(<span style=color:#f92672>&amp;</span>base<span style=color:#f92672>-&gt;</span>lock);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>call_timer_fn</span>(timer, fn);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>raw_spin_lock</span>(<span style=color:#f92672>&amp;</span>base<span style=color:#f92672>-&gt;</span>lock);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>raw_spin_unlock_irq</span>(<span style=color:#f92672>&amp;</span>base<span style=color:#f92672>-&gt;</span>lock);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>call_timer_fn</span>(timer, fn);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>raw_spin_lock_irq</span>(<span style=color:#f92672>&amp;</span>base<span style=color:#f92672>-&gt;</span>lock);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><ul><li>list에서 timer를 꺼낸후, running_timer 로 만들어 놓고, list 에서 detach 시킨다.</li><li>그 뒤 fn 에다가 timer callback 을 넣어주고, TIMER_IRQSAFE(TIMER 가 irq disabled 이고 irq handler 가 실행 중인걸 기다려야되는지)인지 확인하고, 그에 따라 lock 걸고 timer를 실행한다.</li></ul></li><li><p>call_timer_fn()</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="static%20void%20call_timer_fn%28struct%20timer_list%20*timer,%20void%20%28*fn%29%28unsigned%20long%29,%0a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20unsigned%20long%20data%29%0a%7b%0a%20%20int%20count%20=%20preempt_count%28%29;%0a%20%20/*%20skip%20*/%0a%20%20trace_timer_expire_entry%28timer%29;%0a%20%20fn%28data%29;%0a%20%20trace_timer_expire_exit%28timer%29;%0a%20%20/*%20skip%20*/%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>call_timer_fn</span>(<span style=color:#66d9ef>struct</span> timer_list <span style=color:#f92672>*</span>timer, <span style=color:#66d9ef>void</span> (<span style=color:#f92672>*</span>fn)(<span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span>),
</span></span><span style=display:flex><span>                     <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>long</span> data)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span> count <span style=color:#f92672>=</span> <span style=color:#a6e22e>preempt_count</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>trace_timer_expire_entry</span>(timer);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fn</span>(data);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>trace_timer_expire_exit</span>(timer);
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* skip */</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></li></ul><h5 id=커널-타이머-정리>커널 타이머 정리</h5><ol><li>동적 타이머 등록 : mod_timer</li><li>TIMER_SOFTIRQ 서비스 요청</li><li>Soft IRQ 서비스 실행</li><li>동적 타이머 만료 후 타이머 핸들러 실행</li></ol><hr><ul><li>HZ : 진동수, 1초에 jiffies 가 업데이트 되는 횟수</li><li>TIMER_SOFTIRQ 로 Soft IRQ 서비스를 요청</li><li>msecs_to_jiffies 를 통해서 밀리초 입력을 jiffies 로 시각 정보를 반환</li><li>내부 시간 비교는 time_after() 와 time_before() 를 사용</li><li>동적타이머 등록 함수 : add_timer(), mod_timer()</li><li>Soft IRQ 컨텍스트에서 처리되므로 실행 시간이 빨라야한다.</li><li>ftrace 에서 동적 타이머 추적 가능 이벤트<ul><li>timer_init, timer_start, timer_expire_entry, timer_expire_exit, timer_cancel</li></ul></li></ul></div><hr><div class=list-files><ul class=section-tree></ul></div></article><script src=/js/wikilink.js></script><div><script src=https://utteranc.es/client.js repo=minuk-dev/minuk-dev.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div></main><footer class=footer><div class=footer-left></div><div class=footer-right><ul class=social><li><a href=/about>About</a></li><li><a href=https://github.com/minuk-dev>Github</a></li></ul></div></footer></body><script src=/js/sidebar.js></script><script src=/js/dir_toggle.js></script><script src=/js/codeblock_copy.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css><script type=module>
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs";
mermaid.initialize({
  startOnLoad: true,
  theme: "dark",
});
</script></html>
<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Effective Debugging/Chatper 6. 컴파일 시간 기법</title><link rel=icon href=http://makerdark98.dev/images/Rb.png><meta property="og:title" content="Effective Debugging/Chatper 6. 컴파일 시간 기법"><meta property="og:description" content="MD98 블로그 : Effective Debugging/Chatper 6. 컴파일 시간 기법"><meta property="og:image" content="http://makerdark98.dev/images/Rb.png"><style>html body{font-family:raleway,sans-serif;background-color:#fff}:root{--accent: #00a3d2;--border-width:  5px }</style><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/css/copy-btn.css><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script src=/js/copy-btn.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98056974-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-98056974-1');</script><script>window.MathJax={jax:["input/TeX","output/CommonHTML"],extensions:["tex2jax.js","asciimath2jax.js","mml2jax.js","MathMenu.js","MathZoom.js"],TeX:{extensions:["AMSmath.js","AMSsymbols.js","autoload-all.js"]},tex2jax:{inlineMath:[['$','$'],["\\(","\\)"]],processEscapes:true},showProcessingMessages:false,messageStyle:"none",menuSettings:{zoom:"Click"},AuthorInit:function(){MathJax.Hub.Register.StartupHook("End",function(){var timeout=false,delay=250;var shrinkMath=function(){var dispFormulas=document.getElementsByClassName("formula");if(dispFormulas){var contentTest=document.getElementsByTagName("body")[0];var nodesWidth=contentTest.offsetWidth;var mathIndent=MathJax.Hub.config.displayIndent;var mathIndentValue=mathIndent.substring(0,mathIndent.length-2);for(var i=0;i<dispFormulas.length;i++){var dispFormula=dispFormulas[i];var wrapper=dispFormula.getElementsByClassName("MathJax_Preview")[0].nextSibling;var child=wrapper.firstChild;wrapper.style.transformOrigin="center";var oldScale=child.style.transform;var newValue=Math.min(0.80*dispFormula.offsetWidth/child.offsetWidth,1.0).toFixed(2);var newScale="scale("+newValue+")";if(!(newScale===oldScale)){wrapper.style.transform=newScale;wrapper.style["margin-left"]=Math.pow(newValue,4)*mathIndentValue+"px";var wrapperStyle=window.getComputedStyle(wrapper);var wrapperHeight=parseFloat(wrapperStyle.height);wrapper.style.height=""+(wrapperHeight*newValue)+"px";if(newValue==="1.00"){wrapper.style.cursor="";wrapper.style.height="";}
else{wrapper.style.cursor="zoom-in";}}}}};shrinkMath();window.addEventListener('resize',function(){clearTimeout(timeout);timeout=setTimeout(shrinkMath,delay);});});}};(function(d,script){script=d.createElement('script');script.type='text/javascript';script.async=true;script.onload=function(){};script.src='https://cdn.mathjax.org/mathjax/latest/MathJax.js';d.getElementsByTagName('head')[0].appendChild(script);}(document));</script><meta name=google-site-verification content="g_3tJyj-KkW-_wKx7Ij5GimHV1nKPZXetCz8ydbBAfA"></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>Effective Debugging/Chatper 6. 컴파일 시간 기법</a>
<button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>Home</a></li><li><a href=/wiki/>Wiki</a></li><li><a href=/posts/>Posts</a></li><li><a href=/about/>About</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=navbar-icon><a href=mailto:makerdark98@gmail.com><i class="fa fa-envelope-o"></i></a></li><li class=navbar-icon><a href=https://github.com/makerdark98/><i class="fa fa-github"></i></a></li><li><div style=max-width:250px;display:inline-block;max-height:40px><script async src="https://cse.google.com/cse.js?cx=003491619885022567520:wnnypdnx4aj"></script><div class=gcse-search></div></div></li></ul></div></div></nav><main><div class=navigator style=display:flex><div style=display:flex><div class=parent-doc style=flex:none><button class="btn btn-link" onclick="(function(elem){elem.querySelector('a').click();})(this);">
<i class="fa fa-arrow-left"></i>[[Effective Debugging]]</button></div></div><div style=margin-left:auto><div style=display:flex><div style=margin-left:auto><div class=wiki-history></div></div></div><script src=/js/localhistory.js></script><script>var now="Chatper 6- 컴파일 시간 기법"
pushHistory(now);</script></div></div><div><h2>Effective Debugging/Chatper 6. 컴파일 시간 기법</h2><a href=https://github.com/makerdark98/makerdark98.github.io/blame/master/src/content/wiki/Effective%20Debugging/Chatper%206-%20%ec%bb%b4%ed%8c%8c%ec%9d%bc%20%ec%8b%9c%ea%b0%84%20%ea%b8%b0%eb%b2%95.md><h5>created : Tue, 07 Apr 2020 20:44:40 +0900</h5><h5>modified : Sat, 26 Sep 2020 23:28:28 +0900</h5></a></div><aside class=navbar id=nav-toc style=text-align:left><nav id=TableOfContents><ul><li><a href=#item-50-생성된-코드-확인하기>Item 50. 생성된 코드 확인하기</a></li><li><a href=#item-51-정적-분석-도구-활용하기>Item 51. 정적 분석 도구 활용하기</a><ul><li><a href=#자주하는-실수-모음>자주하는 실수 모음</a></li><li><a href=#기억할-사항>기억할 사항</a></li></ul></li><li><a href=#item-52-빌드-결과와-실행-동작이-항상-일정하도록-설정하기>Item 52. 빌드 결과와 실행 동작이 항상 일정하도록 설정하기</a></li><li><a href=#item-53-라이브러리에서-제공하는-디버깅-및-검사-기능-설정하기>Item 53. 라이브러리에서 제공하는 디버깅 및 검사 기능 설정하기</a><ul><li><a href=#기억할-사항-1>기억할 사항</a></li></ul></li></ul></nav></aside><div align=start class=content data-spy=scroll data-offset=20 data-target=#nav-toc style=position:relative><h2 id=item-50-생성된-코드-확인하기>Item 50. 생성된 코드 확인하기</h2><ul><li>컴파일러에서 생성한 코드를 살펴보면 컴팡리 및 실행 시간에 발생한 문제가 소스 코드의 어느 부분에 관련이 있는지 찾아낼 수 있다.</li><li>컴파일러로 생성된 코드를 좀 더 읽기 좋게 표현하려면 컴파일러에 적절한 옵션을 지정하거나 특수한 도구를 사용한다.</li></ul><h2 id=item-51-정적-분석-도구-활용하기>Item 51. 정적 분석 도구 활용하기</h2><h3 id=자주하는-실수-모음>자주하는 실수 모음</h3><ul><li>널 포인터 참조</li><li>동시성 오류 및 경쟁 상태</li><li>철자 오류 (변수를 명시적으로 선언하지 않아도 되는 언어에서 주로 발생함)</li><li>배열이나 메모리 버퍼에 대한 잘못된 인덱스 참조</li><li>잘못된 조건문, 반복문, case문으로 인해 실행될 수 없는 문장</li><li>처리하지 않은 예외</li><li>사용하지 않는 변수나 루틴</li><li>수식 오류</li><li>중복된 코드</li><li>C++에서의 3의 법칙이나 0의 법칙을 따르지 않거나, 자바에서 클래스를 정의할 때 equals/HashCode 메서드를 일고나성이 없는 형태로 구현한 경우</li><li>자원 누수</li><li>보안 취약점</li><li>문법 오류</li></ul><h3 id=기억할-사항>기억할 사항</h3><ul><li>정적 프로그램 분석 도구를 활용하면 컴파일러 경고 메시지로 찾지 못한 잠재적인 버그를 발견할 수 있다.</li><li>프로그램에 존재하는 버그를 분석하기 좋도록 컴파일러 옵션을 적절히 설정한다.</li><li>빌드 과정과 지속적인 통합 과정에 최소한 한 개 이상의 정적 프로그램 분석 도구를 거치도록 설정한다.</li></ul><h2 id=item-52-빌드-결과와-실행-동작이-항상-일정하도록-설정하기>Item 52. 빌드 결과와 실행 동작이 항상 일정하도록 설정하기</h2><ul><li>악의적인 공격을 막기 위해 OS 커널이 프로그램이 올라갈 메모리의 위치에 대한 주소 값을 난수로 정한다. (ALSR, Address Space Layout Randomization)</li><li>GNU/Linux 에서는</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>  setarch <span style=color:#66d9ef>$(</span>uname -m<span style=color:#66d9ef>)</span> -R myprogram
</code></pre></div><ul><li><p>Visual Studio에서는 <code>/DYNAMICBASE:NO</code> 옵션을 지정한다.</p></li><li><p>컴파일러는 기호 이름을 결과 파일에 넣을 때 임의로 생성한 값을 사용한다. <code>GCC</code>에서 <code>-frandom-seed</code> 플래그를 지정하면 이 값을 고정할 수 있다.</p></li><li><p>컴파일러에 입력한 값의 순서가 변한다. 컴파일하거나 링크할 파일을 Makefile에서 와일드카드 형태로 지정했다면 빌드할 때마다 실제로 파일이 입력되는 순서가 달라진다. 입력값을 명시적으로 지정하거나, 와일드카드로 입력할 항목을 정렬하면 순서를 일정하게 유지할 수 있다.</p></li><li><p><code>__DATE__</code>와 <code>__TIME__</code> 매크로를 이용하여 소프트웨어의 버전을 타밍스탬프 값으로 표기하도록 코드를 작성했다면 이 값도 매번 달라진다. 타임스탬프 대신 버전관리 시스템의 식별자를 사용하면 고정할 수 있다.</p></li><li><p>해시나 맵을 통해 생성한 리스트도 변한다. 어떤 컴파일러는 알고리즘 복잡도 공격을 막기 위해 객체에 대한 해시 방식도 바꾼다.</p></li><li><p>어떤 값을 암호화 하는 과정에서 salt를 추가하기도 한다. 이렇게 하면 dictionary attacks을 어느 정도 막을 수 있다. 단, 코드를 디버깅할 때는 꺼두는게 좋다.</p></li></ul><h2 id=item-53-라이브러리에서-제공하는-디버깅-및-검사-기능-설정하기>Item 53. 라이브러리에서 제공하는 디버깅 및 검사 기능 설정하기</h2><h3 id=기억할-사항-1>기억할 사항</h3><ul><li>현재 개발 환경의 컴파일러와 라이브러리에서 제공하는 런타임 디버깅 기능을 찾아서 적극 활용한다.</li><li>현재 환경에서 제공되는 런타임 디버깅 기능이 없다면 이를 제공하는 서드파티 라이브러리를 사용하도록 설정한다.</li></ul></div><script src=/js/wikilink.js></script><div><script src=https://utteranc.es/client.js repo=makerdark98/makerdark98.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></main><footer><p class="copyright text-muted">© All rights reserved. Powered by <a href=https://gohugo.io>Hugo</a> and <a href=https://github.com/calintat/minimal>Minimal</a>.</p></footer></body></html>
<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://unpkg.com/simpledotcss/simple.css><link rel=stylesheet href=/css/main.css><meta name=generator content="Hugo 0.140.0"><meta name=description content="minuk.dev wiki"><meta name=keywords content="hugo,site,new"><meta name=author content="Min-Uk.Lee"><title>Network Simulator 3 |
minuk dev wiki
</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></head><body><header class=header><div class=header_left><a href=/><img class=logo src=/images/Rb.png alt=logo>
MinUk.Dev</a></div><div class=header_middle>Network Simulator 3</div></header><main><article class=main><div class=title><h1 class=title-header>Network Simulator 3</h1></div><a href=https://github.com/minuk-dev/minuk-dev.github.io/blame/master/content/wiki/lectures/ns3.md><h5>created : Fri, 07 May 2021 08:59:07 +0900</h5><h5>modified : Fri, 07 May 2021 11:07:35 +0900</h5></a><div class=article-meta><div class="breadcumb content"><i class="bi bi-folder"></i>
[[lectures/wireless]]</div></div><div class=list-terms><ul><i class="bi bi-tags" title=Tags></i>
<a href=/tags/wireless class=tag-btn>wireless</a>
<a href=/tags/ns3 class=tag-btn>ns3</a></ul></div><aside class=navbar id=nav-toc style=text-align:left><nav id=TableOfContents><ul><li><a href=#configuration>Configuration</a></li><li><a href=#basic>Basic</a><ul><li><a href=#basic-from>Basic From</a></li></ul></li></ul></nav></aside><div class=content><h2 id=configuration>Configuration</h2><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#ZgotmplZ>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/nsnam/ns-3-dev-git.git --depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>cd ns-3-dev-git
</span></span><span style=display:flex><span>./waf configure --enable-examples
</span></span><span style=display:flex><span>./waf</span></span></code></pre></div></div><h2 id=basic>Basic</h2><h3 id=basic-from>Basic From</h3><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="#include%20%22ns3/core-module.h%22%0a#include%20%22ns3/network-module.h%22%0a#include%20%22ns3/internet-module.h%22%0a#include%20%22ns3/point-to-point-module.h%22%0a#include%20%22ns3/applications-module.h%22%0a%0ausing%20namespace%20ns3;%0a%0aNS_LOG_COMPONENT_DEFINE%20%28%22LMU_FirstScriptExample%22%29;%0a%0aint%20main%20%28int%20argc,%20char%20*argv[]%29%20%7b%0a%20%20CommandLine%20cmd%28__FILE__%29;%0a%20%20cmd.Parse%28argc,%20argv%29;%0a%0a%20%20/*%20%ec%8b%9c%ea%b0%84%20%ec%a0%95%ed%99%95%eb%8f%84%20%ec%84%a4%ec%a0%95%20*/%0a%20%20Time::SetResolution%20%28Time::NS%29;%0a%20%20/*%20Log%20Level%20%ec%84%a4%ec%a0%95%20*/%0a%20%20LogComponentEnable%28%22UdpEchoClientApplication%22,%20LOG_LEVEL_INFO%29;%0a%20%20LogComponentEnable%28%22UdpEchoServerApplication%22,%20LOG_LEVEL_INFO%29;%0a%0a%20%20/*%20Node%20%ec%84%a4%ec%a0%95%20*/%0a%20%20NodeContainer%20nodes;%0a%20%20nodes.Create%282%29;%0a%0a%20%20PointToPointHelper%20pointToPoint;%0a%20%20pointToPoint.SetDeviceAttribute%28%22DataRate%22,%20StringValue%28%225Mbps%22%29%29;%0a%20%20pointToPoint.SetChannelAttribute%28%22Delay%22,%20StringValue%28%222ms%22%29%29;%0a%0a%20%20/*%20Network%20Device%20%ec%84%a4%ec%a0%95%20*/%0a%20%20NetDeviceContainer%20devices;%0a%20%20devices%20=%20pointToPoint.Install%28nodes%29;%0a%0a%20%20/*%20Internet%20Stack%20%ec%84%a4%ec%a0%95%20*/%0a%20%20InternetStackHelper%20stack;%0a%20%20stack.Install%28nodes%29;%0a%0a%20%20/*%20IP%20%ed%95%a0%eb%8b%b9%20*/%0a%20%20Ipv4AddressHelper%20address;%0a%20%20address.SetBase%28%2210.1.1.0%22,%20%22255.255.255.0%22%29;%0a%0a%20%20Ipv4InterfaceContainer%20interfaces%20=%20address.Assign%20%28devices%29;%0a%0a%20%20/*%20Application%20%ec%84%a4%ec%a0%95%20*/%0a%20%20UdpEchoServerHelper%20echoServer%289%29;%0a%0a%20%20ApplicationContainer%20serverApps%20=%20echoServer.Install%28nodes.Get%281%29%29;%0a%20%20serverApps.Start%20%28Seconds%281.0%29%29;%0a%20%20serverApps.Stop%20%28Seconds%2810.0%29%29;%0a%0a%20%20UdpEchoClientHelper%20echoClient%20%28interfaces.GetAddress%281%29,%209%29;%0a%20%20echoClient.SetAttribute%28%22MaxPackets%22,%20UintegerValue%281%29%29;%0a%20%20echoClient.SetAttribute%28%22Interval%22,%20TimeValue%28Seconds%281.0%29%29%29;%0a%20%20echoClient.SetAttribute%28%22PacketSize%22,%20UintegerValue%281024%29%29;%0a%0a%20%20ApplicationContainer%20clientApps%20=%20echoClient.Install%20%28nodes.Get%280%29%29;%0a%0a%20%20/*%20%ec%8b%a4%ed%96%89%20*/%0a%20%20clientApps.Start%20%28Seconds%282.0%29%29;%0a%20%20clientApps.Stop%20%28Seconds%2810.0%29%29;%0a%0a%20%20Simulator::Run%28%29;%0a%20%20Simulator::Destroy%28%29;%0a%0a%20%20return%200;%0a%7d">
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;ns3/core-module.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;ns3/network-module.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;ns3/internet-module.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;ns3/point-to-point-module.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;ns3/applications-module.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>using</span> <span style=color:#66d9ef>namespace</span> ns3;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NS_LOG_COMPONENT_DEFINE (<span style=color:#e6db74>&#34;LMU_FirstScriptExample&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>main</span> (<span style=color:#66d9ef>int</span> argc, <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>argv[]) {
</span></span><span style=display:flex><span>  CommandLine cmd(__FILE__);
</span></span><span style=display:flex><span>  cmd.Parse(argc, argv);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* 시간 정확도 설정 */</span>
</span></span><span style=display:flex><span>  Time<span style=color:#f92672>::</span>SetResolution (Time<span style=color:#f92672>::</span>NS);
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Log Level 설정 */</span>
</span></span><span style=display:flex><span>  LogComponentEnable(<span style=color:#e6db74>&#34;UdpEchoClientApplication&#34;</span>, LOG_LEVEL_INFO);
</span></span><span style=display:flex><span>  LogComponentEnable(<span style=color:#e6db74>&#34;UdpEchoServerApplication&#34;</span>, LOG_LEVEL_INFO);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Node 설정 */</span>
</span></span><span style=display:flex><span>  NodeContainer nodes;
</span></span><span style=display:flex><span>  nodes.Create(<span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  PointToPointHelper pointToPoint;
</span></span><span style=display:flex><span>  pointToPoint.SetDeviceAttribute(<span style=color:#e6db74>&#34;DataRate&#34;</span>, StringValue(<span style=color:#e6db74>&#34;5Mbps&#34;</span>));
</span></span><span style=display:flex><span>  pointToPoint.SetChannelAttribute(<span style=color:#e6db74>&#34;Delay&#34;</span>, StringValue(<span style=color:#e6db74>&#34;2ms&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Network Device 설정 */</span>
</span></span><span style=display:flex><span>  NetDeviceContainer devices;
</span></span><span style=display:flex><span>  devices <span style=color:#f92672>=</span> pointToPoint.Install(nodes);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Internet Stack 설정 */</span>
</span></span><span style=display:flex><span>  InternetStackHelper stack;
</span></span><span style=display:flex><span>  stack.Install(nodes);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* IP 할당 */</span>
</span></span><span style=display:flex><span>  Ipv4AddressHelper address;
</span></span><span style=display:flex><span>  address.SetBase(<span style=color:#e6db74>&#34;10.1.1.0&#34;</span>, <span style=color:#e6db74>&#34;255.255.255.0&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  Ipv4InterfaceContainer interfaces <span style=color:#f92672>=</span> address.Assign (devices);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* Application 설정 */</span>
</span></span><span style=display:flex><span>  UdpEchoServerHelper echoServer(<span style=color:#ae81ff>9</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ApplicationContainer serverApps <span style=color:#f92672>=</span> echoServer.Install(nodes.Get(<span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>  serverApps.Start (Seconds(<span style=color:#ae81ff>1.0</span>));
</span></span><span style=display:flex><span>  serverApps.Stop (Seconds(<span style=color:#ae81ff>10.0</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  UdpEchoClientHelper echoClient (interfaces.GetAddress(<span style=color:#ae81ff>1</span>), <span style=color:#ae81ff>9</span>);
</span></span><span style=display:flex><span>  echoClient.SetAttribute(<span style=color:#e6db74>&#34;MaxPackets&#34;</span>, UintegerValue(<span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>  echoClient.SetAttribute(<span style=color:#e6db74>&#34;Interval&#34;</span>, TimeValue(Seconds(<span style=color:#ae81ff>1.0</span>)));
</span></span><span style=display:flex><span>  echoClient.SetAttribute(<span style=color:#e6db74>&#34;PacketSize&#34;</span>, UintegerValue(<span style=color:#ae81ff>1024</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  ApplicationContainer clientApps <span style=color:#f92672>=</span> echoClient.Install (nodes.Get(<span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>/* 실행 */</span>
</span></span><span style=display:flex><span>  clientApps.Start (Seconds(<span style=color:#ae81ff>2.0</span>));
</span></span><span style=display:flex><span>  clientApps.Stop (Seconds(<span style=color:#ae81ff>10.0</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  Simulator<span style=color:#f92672>::</span>Run();
</span></span><span style=display:flex><span>  Simulator<span style=color:#f92672>::</span>Destroy();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div><ul><li><code>NS_LOG_COMPONENT_DEFINE</code> in <code>ns/log.h</code></li></ul><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#ZgotmplZ>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#define NS_LOG_COMPONENT_DEFINE(name)                           \
</span></span></span><span style=display:flex><span><span style=color:#75715e>  static ns3::LogComponent g_log = ns3::LogComponent (name, __FILE__)</span></span></span></code></pre></div></div><ul><li><code>CommandLine</code> class in <code>ns/command-line.h</code></li></ul><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=/**%0a%20*%20%5ccode%0a%20*%20%20%20int%20value1;%0a%20*%20%20%20int%20value2;%0a%20*%0a%20*%20%20%20CommandLine%20cmd%20%28__FILE__%29;%0a%20*%20%20%20cmd.Usage%20%28%22...%22%29;%0a%20*%20%20%20cmd.AddValue%20%28%22value1%22,%20%22first%20value%22,%20value1%29;%0a%20*%20%20%20cmd.AddValue%20%28%22value2%22,%20%22second%20value%22,%20value1%29;%0a%20*%0a%20*%20%20%20cmd.Parse%20%28argc,%20argv%29;%0a%20*%0a%20*%20%20%20if%20%28value1%20*%20value2%20%3c%200%29%0a%20*%20%20%20%20%20%7b%0a%20*%20%20%20%20%20%20%20std::cerr%20%3c%3c%20%22value1%20and%20value2%20must%20have%20the%20same%20sign!%22%20%3c%3c%20std::endl;%0a%20*%20%20%20%20%20%20%20std::cerr%20%3c%3c%20cmd;%0a%20*%20%20%20%20%20%20%20exit%20%28-1%29;%0a%20*%20%20%20%20%20%7d%0a%20*%20%5cendcode%0a%20**/>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * \code
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   int value1;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   int value2;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   CommandLine cmd (__FILE__);
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   cmd.Usage (&#34;...&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   cmd.AddValue (&#34;value1&#34;, &#34;first value&#34;, value1);
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   cmd.AddValue (&#34;value2&#34;, &#34;second value&#34;, value1);
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   cmd.Parse (argc, argv);
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   if (value1 * value2 &lt; 0)
</span></span></span><span style=display:flex><span><span style=color:#75715e> *     {
</span></span></span><span style=display:flex><span><span style=color:#75715e> *       std::cerr &lt;&lt; &#34;value1 and value2 must have the same sign!&#34; &lt;&lt; std::endl;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *       std::cerr &lt;&lt; cmd;
</span></span></span><span style=display:flex><span><span style=color:#75715e> *       exit (-1);
</span></span></span><span style=display:flex><span><span style=color:#75715e> *     }
</span></span></span><span style=display:flex><span><span style=color:#75715e> * \endcode
</span></span></span><span style=display:flex><span><span style=color:#75715e> **/</span></span></span></code></pre></div></div><ul><li></li></ul></div><hr><div class=list-files><ul class=section-tree></ul></div></article><script src=/js/wikilink.js></script><div><script src=https://utteranc.es/client.js repo=minuk-dev/minuk-dev.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div></main><footer class=footer><div class=footer-left></div><div class=footer-right><ul class=social><li><a href=/about>About</a></li><li><a href=https://github.com/minuk-dev>Github</a></li></ul></div></footer></body><script src=/js/dir_toggle.js></script><script src=/js/codeblock_copy.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css><script type=module>
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs";
mermaid.initialize({
  startOnLoad: true,
  theme: "dark",
});
</script></html>
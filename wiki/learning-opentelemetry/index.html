<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://unpkg.com/simpledotcss/simple.css><link rel=stylesheet href=/css/main.css><meta name=generator content="Hugo 0.140.0"><meta name=description content="minuk.dev wiki"><meta name=keywords content="hugo,site,new"><meta name=author content="Min-Uk.Lee"><title>Learning OpenTelemetry |
minuk dev wiki
</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></head><body><header class=header><div class=header_left><a href=/><img class=logo src=/images/Rb.png alt=logo>
MinUk.Dev</a></div><div class=header_middle>Learning OpenTelemetry</div></header><main><article class=main><div class=title><h1 class=title-header>Learning OpenTelemetry</h1></div><a href=https://github.com/minuk-dev/minuk-dev.github.io/blame/master/content/wiki/Learning%20OpenTelemetry.md><h5>created : Sat, 11 May 2024 01:31:18 +0900</h5><h5>modified : Wed, 15 May 2024 23:34:03 +0900</h5></a><div class=article-meta><div class="breadcumb content"><i class="bi bi-folder"></i>
[[_index]]</div></div><div class=list-terms><ul><i class="bi bi-tags" title=Tags></i></ul></div><aside class=navbar id=nav-toc style=text-align:left><nav id=TableOfContents><ul><li><a href=#chapter-1-the-state-of-modern-observability>Chapter 1. The State of Modern Observability</a><ul><li><a href=#the-times-they-are-a-changin>The Times They Are A-Changin'</a></li><li><a href=#observability-key-terms-to-know>Observability: Key Terms to Know</a></li><li><a href=#a-breif-history-of-telemetry>A Breif History of Telemetry</a></li><li><a href=#the-three-browser-tabs-of-observability>The Three Browser Tabs of Observability</a></li><li><a href=#emerging-complications>Emerging Complications</a></li><li><a href=#the-three-pillars-were-an-accident>The Three Pillars Were an Accident</a></li><li><a href=#a-single-braid-of-data>A Single Braid of Data</a></li></ul></li><li><a href=#chapter-2-why-use-opentelemetry>Chapter 2. Why Use OpenTelemetry?</a><ul><li><a href=#the-challenges-of-production-debugging>The Challenges of Production Debugging</a></li><li><a href=#the-importance-of-telemetry>The Importance of Telemetry</a></li><li><a href=#what-do-people-need>What Do People Need?</a></li><li><a href=#why-use-opentelemetry>Why Use OpenTelemetry?</a></li></ul></li><li><a href=#chapter-3-opentelemetry-overview>Chapter 3. OpenTelemetry Overview</a><ul><li><a href=#primary-observability-signals>Primary Observability Signals</a></li><li><a href=#observability-context>Observability Context</a></li><li><a href=#opentelemetry-protocol>OpenTelemetry Protocol</a></li><li><a href=#compatibility-and-future-proofing>Compatibility and Future-Proofing</a></li></ul></li><li><a href=#chapter-4-the-opentelemetry-architecture>Chapter 4. The OpenTelemetry Architecture</a><ul><li><a href=#application-telemetry>Application Telemetry</a></li><li><a href=#infrastructure-telemetry>Infrastructure Telemetry</a></li></ul></li></ul></nav></aside><div class=content><h1 id=learning-opentelemetry>Learning OpenTelemetry</h1><ul><li>Setting Up and Operating a Modern Observability System</li></ul><h2 id=chapter-1-the-state-of-modern-observability>Chapter 1. The State of Modern Observability</h2><h3 id=the-times-they-are-a-changin>The Times They Are A-Changin'</h3><h3 id=observability-key-terms-to-know>Observability: Key Terms to Know</h3><ul><li>Resources:<ul><li>Physical compoenents: servers, containers, processes, RAM, CPU, and network cards.</li><li>Logical components: clients, applications, API endpoints, databases, and load balancers</li></ul></li><li>Transactions:<ul><li>These are requests that orchestrate and utilize the resources the system needs to do work on behalf of the user.</li></ul></li><li>User telemetry</li><li>Performance telemetry</li><li>Signal:<ul><li>Events logs</li><li>System metrics</li><li>etc.</li></ul></li><li>instrumentation: code that emits telemetry data</li><li>transmission system: sending the data over the network to an analysis tool</li><li>telemetry + analysis = observability</li></ul><h3 id=a-breif-history-of-telemetry>A Breif History of Telemetry</h3><h3 id=the-three-browser-tabs-of-observability>The Three Browser Tabs of Observability</h3><ul><li>logs</li><li>metrics</li><li>tracing</li><li>A pillar of observability:<ul><li>Instrumentation</li><li>Data format</li><li>Data transmission</li><li>Storage and analysis</li></ul></li></ul><h3 id=emerging-complications>Emerging Complications</h3><ul><li>Most production problems emerge from the way many concurrent transcations interact.</li></ul><h3 id=the-three-pillars-were-an-accident>The Three Pillars Were an Accident</h3><ul><li>Useful observations do not come from looking at data in isolation.</li></ul><h3 id=a-single-braid-of-data>A Single Braid of Data</h3><ul><li><p>Human investigation:</p><ul><li>suffers as organizations grow larger and systems become more complex.</li></ul></li><li><p>Computer investigation:</p><ul><li>computers can find correlations only between connected pieces of data.</li></ul></li><li><p>OpenTelemetry brings all of this information together.</p></li></ul><h2 id=chapter-2-why-use-opentelemetry>Chapter 2. Why Use OpenTelemetry?</h2><ul><li>A lot of data is an overwehlming amount of data, in fact.</li><li>Not consistent.</li><li>How do you standardize this data? How do you analyze it? How do you ensure that you&rsquo;re collecting what you need to, and how do you make changes to which data you colelct over time?</li></ul><h3 id=the-challenges-of-production-debugging>The Challenges of Production Debugging</h3><ul><li>There are no universal standards for creating telemetry.</li><li>Many debugging techniques are difficult to use when your systems are chaning rapidly.</li><li>Lack of high-quality, stands-based, consistent telemetry data.</li></ul><h3 id=the-importance-of-telemetry>The Importance of Telemetry</h3><h4 id=hard-and-soft-context>Hard and Soft Context</h4><ul><li>Context: an overloaded term in the mmonitoring and observabiilty space.</li><li>hard context:<ul><li>per-request identifier that services in a distributed application can propagate to other service that are part of the same request.</li></ul></li><li>soft context:<ul><li>various pieces of metadata that each telemetry instrument attaches to measurements from the various services and infrastructure that handle that same request</li></ul></li></ul><h4 id=telemetry-layering>Telemetry Layering</h4><ul><li>Telemetry signals are generally convertible.</li><li>Signals are linked to each other through hard context.</li><li>Logs also are attached to trace contexts as they&rsquo;re processed.</li><li>OpenTelemetry is an evolutionary step in understanding systems.</li></ul><h3 id=what-do-people-need>What Do People Need?</h3><ul><li>Telemetry and observability have many stakeholders.</li></ul><h4 id=developers-and-operators>Developers and Operators</h4><ul><li>Quality, highly contextual, highly correclated, and layered, among other things.</li><li>Log4j, StatsD, Prometheus, and Zipkin.</li></ul><h4 id=teams-and-organizations>Teams and Organizations</h4><ul><li>Open standards that prevent vendor lock-in.</li><li>Standard data formats and wire protocols.</li><li>Composable, extensible, and well-documented instrumentation libraries and tools.</li></ul><h3 id=why-use-opentelemetry>Why Use OpenTelemetry?</h3><ul><li>Universal Standards</li><li>Correlated Data</li></ul><h2 id=chapter-3-opentelemetry-overview>Chapter 3. OpenTelemetry Overview</h2><ul><li>OpenTelemetry solves:<ul><li>gives delelopers a single solution for built-in, native instrumentation of their code.</li><li>allows for instrumentation and telemetry data to be broadly compatible with the rest of the observability ecosystem.</li></ul></li></ul><h3 id=primary-observability-signals>Primary Observability Signals</h3><ul><li>Coapturing the relationships between services in your system using actual production data and service-to-service communication</li><li>Annotating service telemetry with consistent and descriptive metadata about what he service is doing and where it&rsquo;s running</li><li>Definitively identifying the relationships between arbitrary groups of measurements - basically, &ldquo;this thing happened at the same time as this other thing&rdquo;</li><li>Efficiently creating accurate counts and measurements of events occurring in a system, such as the number of requests that occur, or how many requests took between 100 and 150 milliseconds to complete</li></ul><h4 id=traces>Traces</h4><ul><li>A trace is a way to model work in a distributed system.</li><li>spans: a collection of related logs for a given transaction.</li><li>Tracing is the core of transaction observability.</li></ul><h4 id=metrics>Metrics</h4><ul><li>Metrics are numeric measurements and recordings of system state, such as the number of users concurrently logged into a system.</li><li>metrics are useful for accurately measuring the &ldquo;big picture&rdquo; of a system.</li><li>Cheap to create and store.</li><li>OpenTelemetry metrics include semantic meaning that observability pipelines or frontends can take advantage of to intelligently query and visualize metric streams.</li><li>OpenTelemetry metrics can be linked to other signals through both hard and soft context, allowing you to layer telemetry signals for cost control or other purposes.</li><li>OpenTelemetry metrics support StatsD and Prometheus outt of the box, allowing you to map those exsiting metrics signals into the OpenTelemetry ecosystem.</li></ul><h4 id=logs>Logs</h4><ul><li>Logging is the final primary signal.</li><li>In OpenTelemetry, main reasons to use logs:<ul><li>To get signals out of services that can&rsquo;t be traced, such as legacy code, mainframes, and other systems of record</li><li>To correlate infrastructure resources such as managed databases or load balancers with application events</li><li>To understand behavior in a system that isn&rsquo;t tied to a user request, such as cron jobs or other recurring and on-demand work</li><li>To process them into other signals, such as metrics or traces</li></ul></li></ul><h3 id=observability-context>Observability Context</h3><ul><li>Three basic tyeps of context in OpenTelemetry:<ul><li>time</li><li>attributes</li><li>context object</li></ul></li></ul><h4 id=the-context-layer>The Context Layer</h4><ul><li>Context is an essential part of a telemetry system.</li><li>At a high level:<ul><li>conetxt: propagation mechanism which carries execution-scoped values across API boundaries and between logically associated execution units</li></ul></li><li>Goal: provide a clean interface either to existing context managers</li><li>Propagators carry the hard context of a request</li><li>Semantic convenntions</li></ul><h4 id=attributes-and-resources>Attributes and Resources</h4><ul><li>No more than 128 unique attributes in OpenTelemetry:<ul><li>Not free to create or assign an attribute.</li><li>Cardinality Explosion</li></ul></li></ul><h4 id=semantic-conventions>Semantic Conventions</h4><ul><li>Main sources of semantic conventions:<ul><li>The set of conentions that the project itself describes and ships</li><li>Platform teams and other internal sources</li></ul></li></ul><h3 id=opentelemetry-protocol>OpenTelemetry Protocol</h3><h3 id=compatibility-and-future-proofing>Compatibility and Future-Proofing</h3><ul><li>Standards-based conteext and conventions, alongside a universal data format.</li><li>API: 3-year support guarantee</li><li>Plug-in interfaces: 1-year support guarantee</li><li>Constructors: 1-year support guarantee</li></ul><h2 id=chapter-4-the-opentelemetry-architecture>Chapter 4. The OpenTelemetry Architecture</h2><ul><li>OpenTelemetry consists of three kinds of components:<ul><li>instrumentation installed within applications</li><li>exporters for infrastructure</li><li>pipeline components for sending all of this telemetry to a storage system</li></ul></li></ul><h3 id=application-telemetry>Application Telemetry</h3><h4 id=library-instrumentation>Library Instrumentation</h4><ul><li>HTTP and RPC clients</li><li>Database clients</li><li>OpenTelemetry provides instrumentation libraries for many popular OSS libraries.</li></ul><h4 id=the-opentelemetry-api>The OpenTelemetry API</h4><ul><li>OpenTelemetry API has a special feature:<ul><li>it is safe to call even when OpenTelemetry is not installed within an application.</li><li>OSS libraries can include OpenTelemetry instrumentation that will automatically be neabled when OpenTelemetry is in use, and that will act as a zero-cost no-op when the library is installed in applications that don&rsquo;t use OpenTelemetry.</li></ul></li></ul><h4 id=the-opentelemetry-sdk>The OpenTelemetry SDK</h4><h3 id=infrastructure-telemetry>Infrastructure Telemetry</h3><h4 id=telemetry-pipelines>Telemetry Pipelines</h4><ul><li>OTLP</li><li>OpenTelemetry Collector</li></ul><h4 id=whats-not-included-in-opentelemetry>What&rsquo;s Not Included in OpenTelemetry</h4><ul><li>No Official Observability Backend</li></ul><h4 id=hands-on-with-the-opentelemetry-demo>Hands-On with the OpenTelemetry Demo</h4><ul><li>OpenTelemetry provides APIs, SDKs, and an ecosystem of tools to create, collect, transform, and ensure the quality of telemetry data.</li><li>OpenTelemetry ensures that telemetry data is portable and interoperable.</li><li>Unlike the old “three pillars” model, OpenTelemetry braids tracing, metrics, logging, and resources together into a single data model. This creates regularized data that is highly correlated and of uniformly high quality.</li><li>OpenTelemetry Semantic Conventions ensure that telemetry from different libraries is consistent and of uniformly high quality.</li><li>OpenTelemetry is just telemetry. It is designed to send data to a variety of storage and analysis tools and enable newer, more advanced analysis tools to be built.</li></ul></div><hr><div class=list-files><ul class=section-tree></ul></div></article><script src=/js/wikilink.js></script><div><script src=https://utteranc.es/client.js repo=minuk-dev/minuk-dev.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div></main><footer class=footer><div class=footer-left></div><div class=footer-right><ul class=social><li><a href=/about>About</a></li><li><a href=https://github.com/minuk-dev>Github</a></li></ul></div></footer></body><script src=/js/dir_toggle.js></script><script src=/js/codeblock_copy.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css><script type=module>
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs";
mermaid.initialize({
  startOnLoad: true,
  theme: "dark",
});
</script></html>
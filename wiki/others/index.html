<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://unpkg.com/simpledotcss/simple.css><link rel=stylesheet href=/css/main.css><meta name=generator content="Hugo 0.140.0"><meta name=description content="minuk.dev wiki"><meta name=keywords content="hugo,site,new"><meta name=author content="Min-Uk.Lee"><title>others |
minuk dev wiki
</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></head><body><header class=header><div class=header_left><a href=/><img class=logo src=/images/Rb.png alt=logo>
MinUk.Dev</a></div><div class=header_middle>others</div></header><main><article class=main><div class=title><h1 class=title-header>others</h1></div><a href=https://github.com/minuk-dev/minuk-dev.github.io/blame/master/content/wiki/others.md><h5>created : Thu, 01 Oct 2020 23:55:41 +0900</h5><h5>modified : Mon, 31 Jan 2022 22:56:00 +0900</h5></a><div class=article-meta><div class="breadcumb content"><i class="bi bi-folder"></i>
[[_index]]</div></div><div class=list-terms><ul><i class="bi bi-tags" title=Tags></i></ul></div><aside class=navbar id=nav-toc style=text-align:left><nav id=TableOfContents><ul><li><a href=#잡다한거>잡다한거</a></li><li><a href=#coarse-grained-vs-fine-grained>coarse-grained vs fine-grained</a></li><li><a href=#write-ahead-logging로그-선행-기록>write-ahead logging(로그 선행 기록)</a></li><li><a href=#aclaccess-control-list>ACL(access control list)</a></li><li><a href=#__read_mostly-매크로-kernel>__read_mostly 매크로 (kernel)</a></li><li><a href=#likely--unlikely-매크로-kernel>likely && unlikely 매크로 (kernel)</a></li><li><a href=#ceph>ceph</a></li><li><a href=#do-while0>do{} while(0)</a></li><li><a href=#asmlinkage-매크로>asmlinkage 매크로</a></li><li><a href=#latent_entropy-매크로>latent_entropy 매크로</a></li><li><a href=#__sched-키워드>__sched 키워드</a></li><li><a href=#crdt>CRDT</a></li><li><a href=#cqrs>CQRS</a></li></ul></nav></aside><div class=content><ul><li>[[Kubernetes Community Day Korea]]</li></ul><h2 id=잡다한거>잡다한거</h2><ul><li>[[5 articles per week]]</li></ul><h2 id=coarse-grained-vs-fine-grained>coarse-grained vs fine-grained</h2><ul><li>참고 : <a href=http://egloos.zum.com/kwon37xi/v/1419790>http://egloos.zum.com/kwon37xi/v/1419790</a></li><li>coarse-grained 는 프로세스를 굵게 쪼개서 뭉뚱그려놓은 것,</li><li>fine-grained 는 프로세스를 아주 잘게 쪼개서 작업하느냐</li><li>찾아보게 된 계기 : fine-grained lock 이라는 단어가 먼지 잘 모르겠어서.</li></ul><h2 id=write-ahead-logging로그-선행-기록>write-ahead logging(로그 선행 기록)</h2><ul><li>transaction 의 내용을 한번 다 적고(commit), 다 적힌 트랜잭션을 데이터 원본 영역에 넣는 방법</li><li>오개념 잡기 쉬운부분 : 항상 모든 내용(데이터)를 다 적을 필요는 없음. 메타데이터만 적고, 데이터를 적을 수도 있음. 자세한건 journaling 참고</li><li>참고 : <a href=https://ko.wikipedia.org/wiki/%EB%A1%9C%EA%B7%B8_%EC%84%A0%ED%96%89_%EA%B8%B0%EC%9E%85>https://ko.wikipedia.org/wiki/%EB%A1%9C%EA%B7%B8_%EC%84%A0%ED%96%89_%EA%B8%B0%EC%9E%85</a></li><li>찾아보게 된 계기 : 논문 보다 나왔는데, 추상적으로만 이해하는게 아니라, 정확히 개념을 정립하기 위해서</li></ul><h2 id=aclaccess-control-list>ACL(access control list)</h2><ul><li>참고 : <a href=https://ko.wikipedia.org/wiki/%EC%A0%91%EA%B7%BC_%EC%A0%9C%EC%96%B4_%EB%AA%A9%EB%A1%9D>https://ko.wikipedia.org/wiki/%EC%A0%91%EA%B7%BC_%EC%A0%9C%EC%96%B4_%EB%AA%A9%EB%A1%9D</a></li><li>개체나 개체 속성에 적용되어 있는 허가 목록</li><li>찾아보게 된 계기 : f2fs github issue에 있길레</li></ul><h2 id=__read_mostly-매크로-kernel>__read_mostly 매크로 (kernel)</h2><ul><li>참고 : <a href=https://poplinux.tistory.com/160>https://poplinux.tistory.com/160</a></li><li>자주 읽을 꺼니, 캐시에 올려놓는게 유리하다고 전달해주는 매크로</li></ul><h2 id=likely--unlikely-매크로-kernel>likely && unlikely 매크로 (kernel)</h2><ul><li>참조 : <a href=http://jake.dothome.co.kr/likely/>http://jake.dothome.co.kr/likely/</a></li></ul><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#define%20likely%28x%29%20%20%20%20__builtin_expect%28%28x%29,%201%29%0a#define%20unlikely%28x%29%20%20%20__builtin_expect%28%28x%29,%200%29>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#define likely(x)    __builtin_expect((x), 1)
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define unlikely(x)   __builtin_expect((x), 0)</span></span></span></code></pre></div></div><ul><li>likely()는 true가 될 확률이 높은 조건문에서 성능을 높이고자 사용한다.</li></ul><h2 id=ceph>ceph</h2><ul><li>참고 : <a href=https://blurblah.net/1298>https://blurblah.net/1298</a></li><li>분산 object store이자 file system, 분산 클러스터 위에서 storage 인터페이스를 제공</li><li>찾아보게 된 계기 : linux kernel mail(linux-fsdevel)로부터 처음 보는 파일 시스템이 있길레</li></ul><h2 id=do-while0>do{} while(0)</h2><ul><li>참고 : <a href=https://woodz.tistory.com/68>https://woodz.tistory.com/68</a></li><li>if 문 뒤 괄호없이 쓸수 있기 때문에, #define으로 선언할때 do-while(0)로 묶어둔다.</li></ul><h2 id=asmlinkage-매크로>asmlinkage 매크로</h2><ul><li>참고 : <a href=http://egloos.zum.com/studyfoss/v/4951809>http://egloos.zum.com/studyfoss/v/4951809</a></li><li>어셈블리 코드에서 직접 호출할 수 있다는 의미</li><li>정의 (include/linux/linkage.h)<div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#include%20%3clinux/config.h%3e%0a#include%20%3casm/linkage.h%3e%0a%0a#ifdef%20__cplusplus%0a#define%20CPP_ASMLINKAGE%20exter%20%22C%22%0a#else%0a#define%20CPP_ASMLINKAGE%0a#endif%0a%0a#ifndef%20asmlinkage%0a#define%20asmlinkage%20CPP_ASMLINKAGE%0a#endif>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;linux/config.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;asm/linkage.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#ifdef __cplusplus
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define CPP_ASMLINKAGE exter &#34;C&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>#else
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define CPP_ASMLINKAGE
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#ifndef asmlinkage
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define asmlinkage CPP_ASMLINKAGE
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif</span></span></span></code></pre></div></div></li><li>함수부 앞에 붙이게 된다면 함수 인자 전달을 모두 스택을 통해서 전달하게된다.</li></ul><h2 id=latent_entropy-매크로>latent_entropy 매크로</h2><ul><li>참고 : <a href=https://lwn.net/Articles/689145/>https://lwn.net/Articles/689145/</a></li><li>참고 내용 대충 번역<div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data="latent_entropy%20%eb%9d%bc%eb%8a%94%20gcc%20plugin%20%ec%9d%84%20%ec%86%8c%ea%b0%9c%ed%95%9c%eb%8b%a4.%0a%ec%9d%b4%20%ed%94%8c%eb%9f%ac%ea%b7%b8%ec%9d%b8%ec%9d%84%20%ec%82%ac%ec%9a%a9%ed%95%98%eb%a9%b4%20%eb%b6%80%ed%8c%85%20%ea%b3%bc%ec%a0%95%20%ec%a4%91%ea%b3%bc%20%eb%b6%80%ed%8c%85%20%ec%9d%b4%ed%9b%84,%20%ec%95%94%ed%98%b8%ed%99%94%20%ed%82%a4%eb%a5%bc%20%ec%83%9d%ec%84%b1%ed%95%98%eb%8a%94%20%ea%b3%bc%ec%a0%95%ec%97%90%ec%84%9c%20%eb%84%88%eb%ac%b4%20entropy%20%ea%b0%80%20%eb%82%ae%ec%95%84%ec%a7%80%eb%8a%94%20%eb%ac%b8%ec%a0%9c%eb%a5%bc%20%ec%99%84%ed%99%94%ed%95%9c%eb%8b%a4.%20=%3e%20%eb%b6%80%ed%8c%85%ed%95%a0%20%eb%95%8c%20%eb%ac%b4%ec%9e%91%ec%9c%84%ec%84%b1%ea%b3%bc%20%ea%b4%80%eb%a0%a8%ed%95%98%ec%97%ac%20%eb%ac%b8%ec%a0%9c%ea%b0%80%20%ec%9e%88%ec%96%b4%ec%84%9c%20%ec%9d%b4%eb%a5%bc%20%ed%95%b4%ea%b2%b0%ed%95%98%eb%8a%94%20plugin%20%ec%9d%b4%eb%9d%bc%eb%8a%94%20%eb%9c%bb%ec%9d%b8%eb%93%af?%0a%0a%ec%9d%b4%20%ed%94%8c%eb%9f%ac%ea%b7%b8%ec%9d%b8%ec%9d%80%20%ed%95%a8%ec%88%98%20%ec%95%9e%ec%97%90%20__latent_entropy%20%eb%9d%bc%eb%8a%94%20%ec%86%8d%ec%84%b1%ec%9d%84%20%ec%a0%81%ec%96%b4%ec%a3%bc%eb%a9%b4%20%eb%9e%9c%eb%8d%a4%ed%95%9c%20%ea%b0%92%ec%9d%84%20%ec%a0%84%ec%97%ad%20%eb%b3%80%ec%88%98%ec%97%90%20%ec%84%9e%ec%96%b4%ec%a4%80%eb%8b%a4.%20%28~~~%29%20%ed%95%9c%ea%b5%ad%ec%96%b4%eb%a1%9c%20%eb%b2%88%ec%97%ad%ed%95%98%ea%b8%b0%20%ed%9e%98%eb%93%a0%eb%8d%b0,%20%ec%9d%b4%eb%a0%87%ea%b2%8c%20%ec%a0%84%ec%97%ad%eb%b3%80%ec%88%98%eb%a5%bc%20%ea%b1%b4%eb%93%a4%ec%97%ac%ec%a3%bc%eb%a9%b4%20%ec%a0%84%ec%b2%b4%ec%a0%81%ec%9c%bc%eb%a1%9c%20%eb%ac%b4%ec%9e%91%ec%9c%84%ec%84%b1%ec%9d%b4%20%ec%a6%9d%ea%b0%80%ed%95%b4%ec%84%9c%20%ec%bb%a4%eb%84%90%ec%9d%98%20%ec%97%94%ed%8a%b8%eb%a1%9c%ed%94%bc%ea%b0%80%20%ec%bb%a4%ec%a7%84%eb%8b%a4.%28%eb%ac%b4%ec%9e%91%ec%9c%84%ec%84%b1%ec%9d%84%20%ec%a0%80%ea%b2%a9%ed%95%b4%ec%84%9c%20%ec%b7%a8%ec%95%bd%ec%a0%90%ec%9d%84%20%ea%b3%b5%ea%b2%a9%ed%95%98%ea%b8%b0%20%ec%96%b4%eb%a0%a4%ec%9b%8c%ec%a7%84%eb%8b%a4.%29%20%eb%9d%bc%eb%8a%94%20%eb%9c%bb%ec%9d%b8%eb%93%af">
<i class="bi bi-copy"></i></button></div><pre><code>latent_entropy 라는 gcc plugin 을 소개한다.
이 플러그인을 사용하면 부팅 과정 중과 부팅 이후, 암호화 키를 생성하는 과정에서 너무 entropy 가 낮아지는 문제를 완화한다. =&gt; 부팅할 때 무작위성과 관련하여 문제가 있어서 이를 해결하는 plugin 이라는 뜻인듯?

이 플러그인은 함수 앞에 __latent_entropy 라는 속성을 적어주면 랜덤한 값을 전역 변수에 섞어준다. (~~~) 한국어로 번역하기 힘든데, 이렇게 전역변수를 건들여주면 전체적으로 무작위성이 증가해서 커널의 엔트로피가 커진다.(무작위성을 저격해서 취약점을 공격하기 어려워진다.) 라는 뜻인듯</code></pre></div></li><li>보안 패치와 관련된 플러그인을 사용하겠다는 것이고, 커널의 무작위성을 높여주는 속성이다. 무작위성과 관련된 취약점이 많다고 생각해서 추가한듯.</li></ul><h2 id=__sched-키워드>__sched 키워드</h2><ul><li>참고 : <a href=https://teamcrak.tistory.com/130>https://teamcrak.tistory.com/130</a>, <a href=https://www.unix.com/programming/162267-linux-kernel-code-syntax-doubt.html>https://www.unix.com/programming/162267-linux-kernel-code-syntax-doubt.html</a></li></ul><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=asmlinkage%20void%20__sched%20schedule%28void%29;%0a#define%20__sched%20__attribute__%28%28__section__%28%22.sched.text%22%29%29%29>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>asmlinkage <span style=color:#66d9ef>void</span> __sched <span style=color:#a6e22e>schedule</span>(<span style=color:#66d9ef>void</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>#define __sched __attribute__((__section__(&#34;.sched.text&#34;)))</span></span></span></code></pre></div></div><ul><li><code>__attribute__</code> 는 컴파일러에게 옵션을 주기 위함으로 cl 컴파일러의 <code>#pragma</code> 와 유사하다</li><li>정의의 내용은 메모리 공간의 어디 부분에 이 함수를 넣으라고 명시하는 것이며, schedule 함수들을 한곳에 모아 <code>in_sched_functions()</code> 같은 함수를 만들기 위함이다. (wchan 은 프로세스가 실행하고 있는 커널 루틴)</li><li>현재 프로세스가 실행하는 메모리 공간을 확인하는 함수가 스케쥴링 중일 때에도 올바른 주소를 반환하는 건, 이 함수를 사용해서이며, 이 함수에서 스케쥴링 상태인지를 확인하는 건 실행 주소가 sched 섹션인지를 확인하는 것이다.</li><li>이렇게 하면 스케쥴링 함수들을 모두 한 메모리 영역에 몰아넣고 PC가 그 안에 있는지 체크하면 된다.</li><li>__sched 키워드만 이런식으로 메모리 공간을 활용하는 것이 아닌데, 이는 여기에 있는 참고 1을 확인하면 된다.</li></ul><h2 id=crdt>CRDT</h2><ul><li>CRDT : Conflict-free replicated data type (CRDT)</li><li>CRDT vs OT(Operational Transform)</li><li><a href="https://news.hada.io/topic?id=2962">https://news.hada.io/topic?id=2962</a></li></ul><h2 id=cqrs>CQRS</h2><ul><li>CQRS : Command and Query Responsibility Segregation</li><li><a href=https://bluayer.com/37>https://bluayer.com/37</a></li></ul></div><hr><div class=list-files><ul class=section-tree></ul></div></article><script src=/js/wikilink.js></script><div><script src=https://utteranc.es/client.js repo=minuk-dev/minuk-dev.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div></main><footer class=footer><div class=footer-left></div><div class=footer-right><ul class=social><li><a href=/about>About</a></li><li><a href=https://github.com/minuk-dev>Github</a></li></ul></div></footer></body><script src=/js/dir_toggle.js></script><script src=/js/codeblock_copy.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css><script type=module>
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs";
mermaid.initialize({
  startOnLoad: true,
  theme: "dark",
});
</script></html>
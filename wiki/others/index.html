<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>others</title><style>html body{font-family:raleway,sans-serif;background-color:#fff}:root{--accent:#00a3d2;--border-width:5px}</style><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/css/copy-btn.css><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script src=/js/copy-btn.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script>$(document).on("click",function(){$(".collapse").collapse("hide")})</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98056974-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-98056974-1")</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><meta name=google-site-verification content="g_3tJyj-KkW-_wKx7Ij5GimHV1nKPZXetCz8ydbBAfA"></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><a class="navbar-brand visible-xs" href=#>others
</a><button class=navbar-toggle data-target=.navbar-collapse data-toggle=collapse>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href=/>Home</a></li><li><a href=/wiki/>Wiki</a></li><li><a href=/posts/>Posts</a></li><li><a href=/about/>About</a></li></ul></div></div></nav><main><div class=navigator style=display:flex><div style=display:flex><a href=/wiki/><button class="btn btn-link"><i class="fa fa-arrow-left"></i>&nbsp;Front Page</button></a></div></div><div><h2>others</h2><a href=https://github.com/minuk-dev/minuk-dev.github.io/blame/master/content/wiki/others.md><h5>created : Thu, 01 Oct 2020 23:55:41 +0900</h5><h5>modified : Mon, 31 Jan 2022 22:56:00 +0900</h5></a></div><aside class=navbar id=nav-toc style=text-align:left><nav id=TableOfContents><ul><li><a href=#잡다한거>잡다한거</a></li><li><a href=#coarse-grained-vs-fine-grained>coarse-grained vs fine-grained</a></li><li><a href=#write-ahead-logging로그-선행-기록>write-ahead logging(로그 선행 기록)</a></li><li><a href=#aclaccess-control-list>ACL(access control list)</a></li><li><a href=#__read_mostly-매크로-kernel>__read_mostly 매크로 (kernel)</a></li><li><a href=#likely--unlikely-매크로-kernel>likely && unlikely 매크로 (kernel)</a></li><li><a href=#ceph>ceph</a></li><li><a href=#do-while0>do{} while(0)</a></li><li><a href=#asmlinkage-매크로>asmlinkage 매크로</a></li><li><a href=#latent_entropy-매크로>latent_entropy 매크로</a></li><li><a href=#__sched-키워드>__sched 키워드</a></li><li><a href=#crdt>CRDT</a></li><li><a href=#cqrs>CQRS</a></li></ul></nav></aside><div align=start class=content data-spy=scroll data-offset=20 data-target=#nav-toc style=position:relative><ul><li>[[Kubernetes Community Day Korea]]</li></ul><h2 id=잡다한거>잡다한거</h2><ul><li>[[5 articles per week]]</li></ul><h2 id=coarse-grained-vs-fine-grained>coarse-grained vs fine-grained</h2><ul><li>참고 : <a href=http://egloos.zum.com/kwon37xi/v/1419790>http://egloos.zum.com/kwon37xi/v/1419790</a></li><li>coarse-grained 는 프로세스를 굵게 쪼개서 뭉뚱그려놓은 것,</li><li>fine-grained 는 프로세스를 아주 잘게 쪼개서 작업하느냐</li><li>찾아보게 된 계기 : fine-grained lock 이라는 단어가 먼지 잘 모르겠어서.</li></ul><h2 id=write-ahead-logging로그-선행-기록>write-ahead logging(로그 선행 기록)</h2><ul><li>transaction 의 내용을 한번 다 적고(commit), 다 적힌 트랜잭션을 데이터 원본 영역에 넣는 방법</li><li>오개념 잡기 쉬운부분 : 항상 모든 내용(데이터)를 다 적을 필요는 없음. 메타데이터만 적고, 데이터를 적을 수도 있음. 자세한건 journaling 참고</li><li>참고 : <a href=https://ko.wikipedia.org/wiki/%EB%A1%9C%EA%B7%B8_%EC%84%A0%ED%96%89_%EA%B8%B0%EC%9E%85>https://ko.wikipedia.org/wiki/%EB%A1%9C%EA%B7%B8_%EC%84%A0%ED%96%89_%EA%B8%B0%EC%9E%85</a></li><li>찾아보게 된 계기 : 논문 보다 나왔는데, 추상적으로만 이해하는게 아니라, 정확히 개념을 정립하기 위해서</li></ul><h2 id=aclaccess-control-list>ACL(access control list)</h2><ul><li>참고 : <a href=https://ko.wikipedia.org/wiki/%EC%A0%91%EA%B7%BC_%EC%A0%9C%EC%96%B4_%EB%AA%A9%EB%A1%9D>https://ko.wikipedia.org/wiki/%EC%A0%91%EA%B7%BC_%EC%A0%9C%EC%96%B4_%EB%AA%A9%EB%A1%9D</a></li><li>개체나 개체 속성에 적용되어 있는 허가 목록</li><li>찾아보게 된 계기 : f2fs github issue에 있길레</li></ul><h2 id=__read_mostly-매크로-kernel>__read_mostly 매크로 (kernel)</h2><ul><li>참고 : <a href=https://poplinux.tistory.com/160>https://poplinux.tistory.com/160</a></li><li>자주 읽을 꺼니, 캐시에 올려놓는게 유리하다고 전달해주는 매크로</li></ul><h2 id=likely--unlikely-매크로-kernel>likely && unlikely 매크로 (kernel)</h2><ul><li>참조 : <a href=http://jake.dothome.co.kr/likely/>http://jake.dothome.co.kr/likely/</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#define likely(x)    __builtin_expect((x), 1)
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define unlikely(x)   __builtin_expect((x), 0)
</span></span></span></code></pre></div><ul><li>likely()는 true가 될 확률이 높은 조건문에서 성능을 높이고자 사용한다.</li></ul><h2 id=ceph>ceph</h2><ul><li>참고 : <a href=https://blurblah.net/1298>https://blurblah.net/1298</a></li><li>분산 object store이자 file system, 분산 클러스터 위에서 storage 인터페이스를 제공</li><li>찾아보게 된 계기 : linux kernel mail(linux-fsdevel)로부터 처음 보는 파일 시스템이 있길레</li></ul><h2 id=do-while0>do{} while(0)</h2><ul><li>참고 : <a href=https://woodz.tistory.com/68>https://woodz.tistory.com/68</a></li><li>if 문 뒤 괄호없이 쓸수 있기 때문에, #define으로 선언할때 do-while(0)로 묶어둔다.</li></ul><h2 id=asmlinkage-매크로>asmlinkage 매크로</h2><ul><li>참고 : <a href=http://egloos.zum.com/studyfoss/v/4951809>http://egloos.zum.com/studyfoss/v/4951809</a></li><li>어셈블리 코드에서 직접 호출할 수 있다는 의미</li><li>정의 (include/linux/linkage.h)<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;linux/config.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;asm/linkage.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#ifdef __cplusplus
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define CPP_ASMLINKAGE exter &#34;C&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>#else
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define CPP_ASMLINKAGE
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>#ifndef asmlinkage
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define asmlinkage CPP_ASMLINKAGE
</span></span></span><span style=display:flex><span><span style=color:#75715e>#endif
</span></span></span></code></pre></div></li><li>함수부 앞에 붙이게 된다면 함수 인자 전달을 모두 스택을 통해서 전달하게된다.</li></ul><h2 id=latent_entropy-매크로>latent_entropy 매크로</h2><ul><li>참고 : <a href=https://lwn.net/Articles/689145/>https://lwn.net/Articles/689145/</a></li><li>참고 내용 대충 번역<pre tabindex=0><code>latent_entropy 라는 gcc plugin 을 소개한다.
이 플러그인을 사용하면 부팅 과정 중과 부팅 이후, 암호화 키를 생성하는 과정에서 너무 entropy 가 낮아지는 문제를 완화한다. =&gt; 부팅할 때 무작위성과 관련하여 문제가 있어서 이를 해결하는 plugin 이라는 뜻인듯?

이 플러그인은 함수 앞에 __latent_entropy 라는 속성을 적어주면 랜덤한 값을 전역 변수에 섞어준다. (~~~) 한국어로 번역하기 힘든데, 이렇게 전역변수를 건들여주면 전체적으로 무작위성이 증가해서 커널의 엔트로피가 커진다.(무작위성을 저격해서 취약점을 공격하기 어려워진다.) 라는 뜻인듯
</code></pre></li><li>보안 패치와 관련된 플러그인을 사용하겠다는 것이고, 커널의 무작위성을 높여주는 속성이다. 무작위성과 관련된 취약점이 많다고 생각해서 추가한듯.</li></ul><h2 id=__sched-키워드>__sched 키워드</h2><ul><li>참고 : <a href=https://teamcrak.tistory.com/130>https://teamcrak.tistory.com/130</a>, <a href=https://www.unix.com/programming/162267-linux-kernel-code-syntax-doubt.html>https://www.unix.com/programming/162267-linux-kernel-code-syntax-doubt.html</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span>asmlinkage <span style=color:#66d9ef>void</span> __sched <span style=color:#a6e22e>schedule</span>(<span style=color:#66d9ef>void</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>#define __sched __attribute__((__section__(&#34;.sched.text&#34;)))
</span></span></span></code></pre></div><ul><li><code>__attribute__</code> 는 컴파일러에게 옵션을 주기 위함으로 cl 컴파일러의 <code>#pragma</code> 와 유사하다</li><li>정의의 내용은 메모리 공간의 어디 부분에 이 함수를 넣으라고 명시하는 것이며, schedule 함수들을 한곳에 모아 <code>in_sched_functions()</code> 같은 함수를 만들기 위함이다. (wchan 은 프로세스가 실행하고 있는 커널 루틴)</li><li>현재 프로세스가 실행하는 메모리 공간을 확인하는 함수가 스케쥴링 중일 때에도 올바른 주소를 반환하는 건, 이 함수를 사용해서이며, 이 함수에서 스케쥴링 상태인지를 확인하는 건 실행 주소가 sched 섹션인지를 확인하는 것이다.</li><li>이렇게 하면 스케쥴링 함수들을 모두 한 메모리 영역에 몰아넣고 PC가 그 안에 있는지 체크하면 된다.</li><li>__sched 키워드만 이런식으로 메모리 공간을 활용하는 것이 아닌데, 이는 여기에 있는 참고 1을 확인하면 된다.</li></ul><h2 id=crdt>CRDT</h2><ul><li>CRDT : Conflict-free replicated data type (CRDT)</li><li>CRDT vs OT(Operational Transform)</li><li><a href="https://news.hada.io/topic?id=2962">https://news.hada.io/topic?id=2962</a></li></ul><h2 id=cqrs>CQRS</h2><ul><li>CQRS : Command and Query Responsibility Segregation</li><li><a href=https://bluayer.com/37>https://bluayer.com/37</a></li></ul></div><script src=/js/wikilink.js></script><div><script src=https://utteranc.es/client.js repo=minuk-dev/minuk-dev.github.io issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div></main><footer class=footer><div class=footer-left></div><div class=footer-right><ul class=social><li><a href=/about>About</a></li><li><a href=https://github.com/minuk-dev>Github</a></li></ul></div></footer>